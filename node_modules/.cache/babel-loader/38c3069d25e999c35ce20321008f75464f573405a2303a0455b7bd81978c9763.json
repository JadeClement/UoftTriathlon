{"ast":null,"code":"var _jsxFileName = \"/Users/jadeclement/Documents/Developer/uofttri/src/components/Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport './Profile.css';\n\n// Team member data - moved outside component to prevent recreation on every render\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst teamMembers = {\n  'swim-coach': {\n    name: 'Justin Konik',\n    role: 'Swim Coach',\n    image: '/images/swimcoach.png',\n    bio: `Justin Konik is our dedicated swim coach with over 10 years of experience in competitive swimming and triathlon coaching. He specializes in stroke technique, endurance training, and helping athletes overcome their fear of open water swimming.\n\nJustin's coaching philosophy focuses on building confidence in the water while developing efficient swimming mechanics. He has coached athletes from complete beginners to elite competitors, and his personalized approach ensures each swimmer reaches their full potential.\n\nWhen not coaching, Justin competes in open water swimming events and enjoys helping new triathletes discover their love for the sport. He believes that swimming should be both challenging and enjoyable, and he's committed to making every training session productive and fun.`\n  },\n  'co-president': {\n    name: 'Jade Clement',\n    role: 'Co-President',\n    image: '/images/team-photo1.jpeg',\n    bio: `Jade joined the team when she started studying engineering at the University of Toronto in 2021. She raced her first mini triathlon at 8 years old and has been having fun racing ever since! Throughout high school she focused mainly on swimming and only stopped competitive swim team at 16. This summer she competed in her first Olympic distance triathlon at the TTF having only ever done sprints before that. Last year she participated in her most exciting race to date - the amateur World Triathlon Championships in Spain! Crossing her fingers that she’ll qualify again for next year! In 2025 she took the role of co-president alongside Marlene and hopes to keep growing the team, plan races together and continue having fun in this crazy sport.`\n  },\n  'co-president-2': {\n    name: 'Marlene Garijo',\n    role: 'Co-President',\n    image: '/images/team-photo2.jpeg',\n    bio: `Marlene Garijo serves as Co-President alongside Jade, bringing her unique perspective and energy to club leadership. With a background in competitive sports and event organization, Marlene excels at creating memorable experiences for club members.\n\nMarlene's strengths lie in strategic planning, member engagement, and ensuring the club operates smoothly behind the scenes. She works closely with the executive team to implement new initiatives and maintain the high standards that make our club special.\n\nHer passion for triathlon extends beyond personal achievement to helping others discover their potential in the sport. Marlene believes that every member has something valuable to contribute to the club, and she works to create opportunities for everyone to get involved.`\n  },\n  'treasurer': {\n    name: 'Edward Ing',\n    role: 'Treasurer',\n    image: '/images/exec_treasurer.jpg',\n    bio: `\nEdward Ing is our newest member of the exec team and joins as your web master and substitute bike leader outdoors. He joined the club in January of 2015. The rationale was to become a good swimmer from near scratch and have a club to train for running races. That summer he raced a duathlon at Welland and thought it was bizarre that in this sport that finishing nowhere near the lead he could still earn a second place podium spot (45-49 age groupers).\nBut what inspired him was that he thought he was running with Olympians because he saw himself racing competitors wearing Team Canada triathlon uniforms. He was mistaken. He found out they were not Olympians, but age-groupers, some like him in the 50s. But he was inspired to earn the privilege to wear those Team Canada trisuit uniforms thinking that might be an achievable goal. He had a bike accident that summer and had to leave the first triathlon till 2016.\nHe finally did his first triathlon, a sprint in Woodstock in 2016. It was a preparation race for the goal of earning a ITU World Championship age-group qualification in the Ottawa National Championship race.\nHis favourite achievement is the New York City Half Marathon 2016, just missing a money spot by one. His duathlon qualification at Esprit de Montreal 2019 for the 2020 ITU Multisport Championships in his mind is his to be executed multisport race.\nAlso he says quite memorable was his Boston qualifying finish at the Toronto Waterfront marathon which he felt was a more important achievement than running Boston itself.\n(Over the COVID hiatus he worked on his swim technique whenever there was a pool opening and thinks he is on the road to fast swims.)\nHis message to young rookie tri-club athletes — “You are likely in the easiest age group to qualify for the World Age-Group Championships, train to qualify, Bragging right last a lifetime here.!”`\n  },\n  'secretary': {\n    name: 'Lauren Williams',\n    role: 'Secretary',\n    image: '/images/team-photo3.jpeg',\n    bio: `Lauren Williams is our club Secretary, responsible for maintaining clear communication and record-keeping within the club. With excellent organizational skills and attention to detail, Lauren ensures that important information reaches all members and that club activities are well-documented.\n\nLauren's role includes managing club communications, taking meeting minutes, maintaining membership records, and coordinating with other executive members to keep everyone informed. Her work behind the scenes is crucial to the smooth operation of the club.\n\nLauren is passionate about creating an inclusive environment where every member feels heard and valued. She believes that clear communication is the foundation of a strong community, and she works diligently to maintain those standards.`\n  },\n  'social-coordinator': {\n    name: 'Katy Tiper',\n    role: 'Social Coordinator/Recruitment',\n    image: '/images/team-photo4.jpg',\n    bio: `Katy Tiper serves as our Social Coordinator and Recruitment specialist, bringing energy and creativity to building our club community. With a natural ability to connect people and organize engaging events, Katy plays a vital role in making our club welcoming to new and existing members.\n\nKaty's responsibilities include planning social events, organizing team building activities, and developing recruitment strategies to grow our membership. She believes that the social aspect of triathlon is just as important as the athletic component, and she works to create opportunities for members to bond and build friendships.\n\nHer approach to recruitment focuses on showcasing the inclusive, supportive nature of our club and helping potential members see how they can fit in, regardless of their experience level. Katy believes that everyone has a place in triathlon, and she's committed to helping them find it.`\n  },\n  'social-media': {\n    name: 'Paulette Dalton',\n    role: 'Social Media Manager',\n    image: '/images/exec_socialmedia.jpg',\n    bio: `Paulette Dalton has been a long time member of the club (confirmed by this vintage jersey!) and is returning to your exec team this year as RECRUITMENT & RACE COORDINATOR.\n            Paulette has been doing triathlons since 2002 (yes almost 20 years) and has completed 9 Ironmans and over 20 marathons (including The Boston Marathon 10 times).\n            Paulette is also an NCCP Level 1 Triathlon Coach.\n            This year you'll find her leading the Friday evening BRICKS and at most of the track workouts and Sunday swims.\n            ASK HER ABOUT: anything bike related (training, aerodynamics, fit, nutrition…)\n            Paulette also manages this Instagram account so send me all your club pics to post! `\n  },\n  'webmaster': {\n    name: 'Ilan Gofman',\n    role: 'Webmaster',\n    image: '/images/icon.png',\n    bio: `Ilan Gofman serves as our club's Webmaster, managing our digital infrastructure and ensuring that our online presence effectively serves our members. With technical expertise and a commitment to user experience, Ilan maintains the systems that keep our club connected and informed.\n\nIlan's responsibilities include maintaining our website, managing member databases, and implementing digital solutions that improve club operations. He works closely with the executive team to identify technological needs and develop solutions that enhance the member experience.\n\nBeyond his technical duties, Ilan is passionate about using technology to build community and make information accessible to all members. He believes that well-designed digital tools can strengthen relationships within the club and make it easier for members to stay engaged and informed.`\n  }\n};\nconst Profile = () => {\n  _s();\n  const {\n    role,\n    name\n  } = useParams();\n  const {\n    currentUser,\n    isAdmin\n  } = useAuth();\n  const [editMode, setEditMode] = useState(false);\n  const [editedBio, setEditedBio] = useState('');\n  const [editedImage, setEditedImage] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [displayMember, setDisplayMember] = useState(null);\n\n  // Find the team member based on the URL parameters\n  // Map URL parameters to team member ID\n  const memberId = React.useMemo(() => {\n    const roleMapping = {\n      'co-president': 'co-president',\n      'co-president-2': 'co-president-2',\n      'social-coordinator': 'social-coordinator',\n      'social-media': 'social-media',\n      'swim-coach': 'swim-coach',\n      'treasurer': 'treasurer',\n      'secretary': 'secretary',\n      'webmaster': 'webmaster'\n    };\n    const id = roleMapping[role];\n    console.log('🔍 URL role:', role, '→ memberId:', id);\n    return id;\n  }, [role]);\n\n  // Get member data from backend API\n  const [member, setMember] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchMember = async () => {\n      if (!memberId) {\n        console.log('❌ No memberId available, cannot fetch member');\n        setLoading(false);\n        return;\n      }\n      console.log('🔍 Fetching member with ID:', memberId);\n      console.log('🌐 API URL:', `http://localhost:5001/api/profiles/${memberId}`);\n      try {\n        const response = await fetch(`http://localhost:5001/api/profiles/${memberId}`);\n        console.log('📡 Response status:', response.status);\n        console.log('📡 Response headers:', response.headers);\n        if (response.ok) {\n          const data = await response.json();\n          console.log('📦 Response data:', data);\n          if (data.member) {\n            // Convert relative image URLs to full URLs\n            const memberWithFullUrls = {\n              ...data.member,\n              image: data.member.image && data.member.image.startsWith('/uploads/') ? `http://localhost:5001${data.member.image}` : data.member.image\n            };\n            console.log('📸 Loaded member image:', memberWithFullUrls.image);\n            console.log('👤 Final member data:', memberWithFullUrls);\n            setMember(memberWithFullUrls);\n            setDisplayMember(memberWithFullUrls);\n          } else {\n            console.error('❌ Response missing member data:', data);\n          }\n        } else {\n          const errorText = await response.text();\n          console.error('❌ Failed to fetch member:', response.status, response.statusText);\n          console.error('❌ Error response:', errorText);\n        }\n      } catch (error) {\n        console.error('❌ Error fetching member:', error);\n        console.error('❌ Error details:', error.message);\n      } finally {\n        console.log('🏁 Setting loading to false');\n        setLoading(false);\n      }\n    };\n    fetchMember();\n  }, [memberId]);\n\n  // Initialize displayMember when member changes\n  React.useEffect(() => {\n    if (member) {\n      // Ensure image URLs are full URLs\n      const memberWithFullUrls = {\n        ...member,\n        image: member.image && member.image.startsWith('/uploads/') ? `http://localhost:5001${member.image}` : member.image\n      };\n      setDisplayMember(memberWithFullUrls);\n    }\n  }, [member]);\n  const handleEdit = () => {\n    setEditedBio(displayMember.bio);\n    setEditedImage(displayMember.image);\n    setEditMode(true);\n  };\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      // Prepare form data for the API\n      const formData = new FormData();\n      formData.append('bio', editedBio);\n\n      // If there's a new image, add it to form data\n      if (editedImage && editedImage !== member.image) {\n        // Convert blob URL to file if it's a blob\n        if (editedImage.startsWith('blob:')) {\n          const response = await fetch(editedImage);\n          const blob = await response.blob();\n          const file = new File([blob], 'profile-image.jpg', {\n            type: 'image/jpeg'\n          });\n          formData.append('image', file);\n        }\n      }\n\n      // Send update to backend API\n      const apiResponse = await fetch(`http://localhost:5001/api/profiles/${memberId}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      if (!apiResponse.ok) {\n        const errorData = await apiResponse.json();\n        throw new Error(errorData.error || 'Failed to update profile');\n      }\n      const result = await apiResponse.json();\n      console.log('✅ Profile updated successfully:', result);\n\n      // Update local state with the response from backend\n      if (result.member) {\n        console.log('🔄 Updating displayMember with:', result.member);\n        console.log('📸 Current editedImage:', editedImage);\n        console.log('🖼️ Result image:', result.member.image);\n\n        // Always use the image from the backend response, or fall back to the current image\n        // If the backend returns a relative path, construct the full URL\n        let finalImage = result.member.image || displayMember.image;\n        if (finalImage && finalImage.startsWith('/uploads/')) {\n          finalImage = `http://localhost:5001${finalImage}`;\n        }\n        console.log('🎯 Final image to use:', finalImage);\n        setDisplayMember(prev => ({\n          ...prev,\n          bio: result.member.bio,\n          image: finalImage\n        }));\n\n        // Also update the member state\n        setMember(prev => ({\n          ...prev,\n          bio: result.member.bio,\n          image: finalImage\n        }));\n      }\n      setEditMode(false);\n      setSaving(false);\n    } catch (error) {\n      console.error('❌ Error updating profile:', error);\n      alert(`Error updating profile: ${error.message}`);\n      setSaving(false);\n    }\n  };\n  const handleCancel = () => {\n    setEditMode(false);\n    setEditedBio('');\n    setEditedImage('');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-state\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Loading profile...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this);\n  }\n  if (!member || !displayMember) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Profile Not Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Sorry, we couldn't find the profile you're looking for.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/coaches-exec\",\n          className: \"back-link\",\n          children: \"\\u2190 Back to Team\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/coaches-exec\",\n        className: \"back-link\",\n        children: \"\\u2190 Back to Team\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-image-section\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: editMode ? editedImage || displayMember.image : displayMember.image,\n            alt: `${displayMember.name} - ${displayMember.role}`,\n            className: \"profile-image\",\n            onError: e => console.error('❌ Image failed to load:', e.target.src),\n            onLoad: () => console.log('✅ Image loaded successfully:', displayMember.image)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"profile-name\",\n              children: displayMember.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"profile-role\",\n              children: displayMember.role\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profile-actions\",\n              children: editMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  onClick: handleSave,\n                  disabled: saving,\n                  children: saving ? 'Saving...' : 'Save Changes'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-secondary\",\n                  onClick: handleCancel,\n                  disabled: saving,\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-edit\",\n                onClick: handleEdit,\n                children: \"Edit Bio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), editMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edit-form\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-upload-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"profile-image\",\n                className: \"image-upload-label\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"image-preview\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: editedImage || displayMember.image,\n                    alt: `${displayMember.name} - ${displayMember.role}`,\n                    className: \"preview-image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 44\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"image-overlay\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Click to change image\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 369,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"profile-image\",\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: e => {\n                  const file = e.target.files[0];\n                  if (file) {\n                    const imageUrl = URL.createObjectURL(file);\n                    setEditedImage(imageUrl);\n                  }\n                },\n                style: {\n                  display: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"image-upload-help\",\n                children: \"Click the image above to upload a new profile picture\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bio-edit-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"bio-textarea\",\n                className: \"form-label\",\n                children: \"Bio:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                id: \"bio-textarea\",\n                value: editedBio,\n                onChange: e => setEditedBio(e.target.value),\n                className: \"bio-textarea\",\n                rows: \"10\",\n                placeholder: \"Enter the team member's bio...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-bio\",\n            children: displayMember.bio.split('\\n\\n').map((paragraph, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n              children: paragraph\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"X/iBW/JQ36J2qC8Qvl4F8NvevcY=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useParams","Link","useAuth","jsxDEV","_jsxDEV","teamMembers","name","role","image","bio","Profile","_s","currentUser","isAdmin","editMode","setEditMode","editedBio","setEditedBio","editedImage","setEditedImage","saving","setSaving","displayMember","setDisplayMember","memberId","useMemo","roleMapping","id","console","log","member","setMember","loading","setLoading","fetchMember","response","fetch","status","headers","ok","data","json","memberWithFullUrls","startsWith","error","errorText","text","statusText","message","handleEdit","handleSave","token","localStorage","getItem","Error","formData","FormData","append","blob","file","File","type","apiResponse","method","body","errorData","result","finalImage","prev","alert","handleCancel","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","src","alt","onError","e","target","onLoad","onClick","disabled","htmlFor","accept","onChange","files","imageUrl","URL","createObjectURL","style","display","value","rows","placeholder","split","map","paragraph","index","_c","$RefreshReg$"],"sources":["/Users/jadeclement/Documents/Developer/uofttri/src/components/Profile.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport './Profile.css';\n\n// Team member data - moved outside component to prevent recreation on every render\nconst teamMembers = {\n    'swim-coach': {\n      name: 'Justin Konik',\n      role: 'Swim Coach',\n      image: '/images/swimcoach.png',\n      bio: `Justin Konik is our dedicated swim coach with over 10 years of experience in competitive swimming and triathlon coaching. He specializes in stroke technique, endurance training, and helping athletes overcome their fear of open water swimming.\n\nJustin's coaching philosophy focuses on building confidence in the water while developing efficient swimming mechanics. He has coached athletes from complete beginners to elite competitors, and his personalized approach ensures each swimmer reaches their full potential.\n\nWhen not coaching, Justin competes in open water swimming events and enjoys helping new triathletes discover their love for the sport. He believes that swimming should be both challenging and enjoyable, and he's committed to making every training session productive and fun.`\n    },\n    'co-president': {\n      name: 'Jade Clement',\n      role: 'Co-President',\n      image: '/images/team-photo1.jpeg',\n      bio: `Jade joined the team when she started studying engineering at the University of Toronto in 2021. She raced her first mini triathlon at 8 years old and has been having fun racing ever since! Throughout high school she focused mainly on swimming and only stopped competitive swim team at 16. This summer she competed in her first Olympic distance triathlon at the TTF having only ever done sprints before that. Last year she participated in her most exciting race to date - the amateur World Triathlon Championships in Spain! Crossing her fingers that she’ll qualify again for next year! In 2025 she took the role of co-president alongside Marlene and hopes to keep growing the team, plan races together and continue having fun in this crazy sport.`\n    },\n    'co-president-2': {\n      name: 'Marlene Garijo',\n      role: 'Co-President',\n      image: '/images/team-photo2.jpeg',\n      bio: `Marlene Garijo serves as Co-President alongside Jade, bringing her unique perspective and energy to club leadership. With a background in competitive sports and event organization, Marlene excels at creating memorable experiences for club members.\n\nMarlene's strengths lie in strategic planning, member engagement, and ensuring the club operates smoothly behind the scenes. She works closely with the executive team to implement new initiatives and maintain the high standards that make our club special.\n\nHer passion for triathlon extends beyond personal achievement to helping others discover their potential in the sport. Marlene believes that every member has something valuable to contribute to the club, and she works to create opportunities for everyone to get involved.`\n    },\n    'treasurer': {\n      name: 'Edward Ing',\n      role: 'Treasurer',\n      image: '/images/exec_treasurer.jpg',\n      bio: `\nEdward Ing is our newest member of the exec team and joins as your web master and substitute bike leader outdoors. He joined the club in January of 2015. The rationale was to become a good swimmer from near scratch and have a club to train for running races. That summer he raced a duathlon at Welland and thought it was bizarre that in this sport that finishing nowhere near the lead he could still earn a second place podium spot (45-49 age groupers).\nBut what inspired him was that he thought he was running with Olympians because he saw himself racing competitors wearing Team Canada triathlon uniforms. He was mistaken. He found out they were not Olympians, but age-groupers, some like him in the 50s. But he was inspired to earn the privilege to wear those Team Canada trisuit uniforms thinking that might be an achievable goal. He had a bike accident that summer and had to leave the first triathlon till 2016.\nHe finally did his first triathlon, a sprint in Woodstock in 2016. It was a preparation race for the goal of earning a ITU World Championship age-group qualification in the Ottawa National Championship race.\nHis favourite achievement is the New York City Half Marathon 2016, just missing a money spot by one. His duathlon qualification at Esprit de Montreal 2019 for the 2020 ITU Multisport Championships in his mind is his to be executed multisport race.\nAlso he says quite memorable was his Boston qualifying finish at the Toronto Waterfront marathon which he felt was a more important achievement than running Boston itself.\n(Over the COVID hiatus he worked on his swim technique whenever there was a pool opening and thinks he is on the road to fast swims.)\nHis message to young rookie tri-club athletes — “You are likely in the easiest age group to qualify for the World Age-Group Championships, train to qualify, Bragging right last a lifetime here.!”`\n    },\n    'secretary': {\n      name: 'Lauren Williams',\n      role: 'Secretary',\n      image: '/images/team-photo3.jpeg',\n      bio: `Lauren Williams is our club Secretary, responsible for maintaining clear communication and record-keeping within the club. With excellent organizational skills and attention to detail, Lauren ensures that important information reaches all members and that club activities are well-documented.\n\nLauren's role includes managing club communications, taking meeting minutes, maintaining membership records, and coordinating with other executive members to keep everyone informed. Her work behind the scenes is crucial to the smooth operation of the club.\n\nLauren is passionate about creating an inclusive environment where every member feels heard and valued. She believes that clear communication is the foundation of a strong community, and she works diligently to maintain those standards.`\n    },\n    'social-coordinator': {\n      name: 'Katy Tiper',\n      role: 'Social Coordinator/Recruitment',\n      image: '/images/team-photo4.jpg',\n      bio: `Katy Tiper serves as our Social Coordinator and Recruitment specialist, bringing energy and creativity to building our club community. With a natural ability to connect people and organize engaging events, Katy plays a vital role in making our club welcoming to new and existing members.\n\nKaty's responsibilities include planning social events, organizing team building activities, and developing recruitment strategies to grow our membership. She believes that the social aspect of triathlon is just as important as the athletic component, and she works to create opportunities for members to bond and build friendships.\n\nHer approach to recruitment focuses on showcasing the inclusive, supportive nature of our club and helping potential members see how they can fit in, regardless of their experience level. Katy believes that everyone has a place in triathlon, and she's committed to helping them find it.`\n    },\n    'social-media': {\n      name: 'Paulette Dalton',\n      role: 'Social Media Manager',\n      image: '/images/exec_socialmedia.jpg',\n      bio: `Paulette Dalton has been a long time member of the club (confirmed by this vintage jersey!) and is returning to your exec team this year as RECRUITMENT & RACE COORDINATOR.\n            Paulette has been doing triathlons since 2002 (yes almost 20 years) and has completed 9 Ironmans and over 20 marathons (including The Boston Marathon 10 times).\n            Paulette is also an NCCP Level 1 Triathlon Coach.\n            This year you'll find her leading the Friday evening BRICKS and at most of the track workouts and Sunday swims.\n            ASK HER ABOUT: anything bike related (training, aerodynamics, fit, nutrition…)\n            Paulette also manages this Instagram account so send me all your club pics to post! `  \n              },\n    'webmaster': {\n      name: 'Ilan Gofman',\n      role: 'Webmaster',\n      image: '/images/icon.png',\n      bio: `Ilan Gofman serves as our club's Webmaster, managing our digital infrastructure and ensuring that our online presence effectively serves our members. With technical expertise and a commitment to user experience, Ilan maintains the systems that keep our club connected and informed.\n\nIlan's responsibilities include maintaining our website, managing member databases, and implementing digital solutions that improve club operations. He works closely with the executive team to identify technological needs and develop solutions that enhance the member experience.\n\nBeyond his technical duties, Ilan is passionate about using technology to build community and make information accessible to all members. He believes that well-designed digital tools can strengthen relationships within the club and make it easier for members to stay engaged and informed.`\n      }\n};\n\nconst Profile = () => {\n  const { role, name } = useParams();\n  const { currentUser, isAdmin } = useAuth();\n  const [editMode, setEditMode] = useState(false);\n  const [editedBio, setEditedBio] = useState('');\n  const [editedImage, setEditedImage] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [displayMember, setDisplayMember] = useState(null);\n\n  // Find the team member based on the URL parameters\n  // Map URL parameters to team member ID\n  const memberId = React.useMemo(() => {\n    const roleMapping = {\n      'co-president': 'co-president',\n      'co-president-2': 'co-president-2', \n      'social-coordinator': 'social-coordinator',\n      'social-media': 'social-media',\n      'swim-coach': 'swim-coach',\n      'treasurer': 'treasurer',\n      'secretary': 'secretary',\n      'webmaster': 'webmaster'\n    };\n    \n    const id = roleMapping[role];\n    console.log('🔍 URL role:', role, '→ memberId:', id);\n    return id;\n  }, [role]);\n\n  // Get member data from backend API\n  const [member, setMember] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchMember = async () => {\n      if (!memberId) {\n        console.log('❌ No memberId available, cannot fetch member');\n        setLoading(false);\n        return;\n      }\n      \n      console.log('🔍 Fetching member with ID:', memberId);\n      console.log('🌐 API URL:', `http://localhost:5001/api/profiles/${memberId}`);\n      \n      try {\n        const response = await fetch(`http://localhost:5001/api/profiles/${memberId}`);\n        console.log('📡 Response status:', response.status);\n        console.log('📡 Response headers:', response.headers);\n        \n        if (response.ok) {\n          const data = await response.json();\n          console.log('📦 Response data:', data);\n          \n          if (data.member) {\n            // Convert relative image URLs to full URLs\n            const memberWithFullUrls = {\n              ...data.member,\n              image: data.member.image && data.member.image.startsWith('/uploads/') \n                ? `http://localhost:5001${data.member.image}` \n                : data.member.image\n            };\n            \n            console.log('📸 Loaded member image:', memberWithFullUrls.image);\n            console.log('👤 Final member data:', memberWithFullUrls);\n            \n            setMember(memberWithFullUrls);\n            setDisplayMember(memberWithFullUrls);\n          } else {\n            console.error('❌ Response missing member data:', data);\n          }\n        } else {\n          const errorText = await response.text();\n          console.error('❌ Failed to fetch member:', response.status, response.statusText);\n          console.error('❌ Error response:', errorText);\n        }\n      } catch (error) {\n        console.error('❌ Error fetching member:', error);\n        console.error('❌ Error details:', error.message);\n      } finally {\n        console.log('🏁 Setting loading to false');\n        setLoading(false);\n      }\n    };\n\n    fetchMember();\n  }, [memberId]);\n\n  // Initialize displayMember when member changes\n  React.useEffect(() => {\n    if (member) {\n      // Ensure image URLs are full URLs\n      const memberWithFullUrls = {\n        ...member,\n        image: member.image && member.image.startsWith('/uploads/') \n          ? `http://localhost:5001${member.image}` \n          : member.image\n      };\n      \n      setDisplayMember(memberWithFullUrls);\n    }\n  }, [member]);\n\n  const handleEdit = () => {\n    setEditedBio(displayMember.bio);\n    setEditedImage(displayMember.image);\n    setEditMode(true);\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    \n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      // Prepare form data for the API\n      const formData = new FormData();\n      formData.append('bio', editedBio);\n      \n      // If there's a new image, add it to form data\n      if (editedImage && editedImage !== member.image) {\n        // Convert blob URL to file if it's a blob\n        if (editedImage.startsWith('blob:')) {\n          const response = await fetch(editedImage);\n          const blob = await response.blob();\n          const file = new File([blob], 'profile-image.jpg', { type: 'image/jpeg' });\n          formData.append('image', file);\n        }\n      }\n\n      // Send update to backend API\n      const apiResponse = await fetch(`http://localhost:5001/api/profiles/${memberId}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n\n      if (!apiResponse.ok) {\n        const errorData = await apiResponse.json();\n        throw new Error(errorData.error || 'Failed to update profile');\n      }\n\n      const result = await apiResponse.json();\n      console.log('✅ Profile updated successfully:', result);\n\n      // Update local state with the response from backend\n      if (result.member) {\n        console.log('🔄 Updating displayMember with:', result.member);\n        console.log('📸 Current editedImage:', editedImage);\n        console.log('🖼️ Result image:', result.member.image);\n        \n        // Always use the image from the backend response, or fall back to the current image\n        // If the backend returns a relative path, construct the full URL\n        let finalImage = result.member.image || displayMember.image;\n        if (finalImage && finalImage.startsWith('/uploads/')) {\n          finalImage = `http://localhost:5001${finalImage}`;\n        }\n        \n        console.log('🎯 Final image to use:', finalImage);\n        \n        setDisplayMember(prev => ({\n          ...prev,\n          bio: result.member.bio,\n          image: finalImage\n        }));\n        \n        // Also update the member state\n        setMember(prev => ({\n          ...prev,\n          bio: result.member.bio,\n          image: finalImage\n        }));\n      }\n\n      setEditMode(false);\n      setSaving(false);\n      \n    } catch (error) {\n      console.error('❌ Error updating profile:', error);\n      alert(`Error updating profile: ${error.message}`);\n      setSaving(false);\n    }\n  };\n\n  const handleCancel = () => {\n    setEditMode(false);\n    setEditedBio('');\n    setEditedImage('');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"profile-container\">\n        <div className=\"container\">\n          <div className=\"loading-state\">\n            <h2>Loading profile...</h2>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!member || !displayMember) {\n    return (\n      <div className=\"profile-container\">\n        <div className=\"container\">\n          <h1>Profile Not Found</h1>\n          <p>Sorry, we couldn't find the profile you're looking for.</p>\n          <Link to=\"/coaches-exec\" className=\"back-link\">← Back to Team</Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"profile-container\">\n      <div className=\"container\">\n        <Link to=\"/coaches-exec\" className=\"back-link\">← Back to Team</Link>\n        \n        <div className=\"profile-content\">\n          <div className=\"profile-image-section\">\n            <img \n              src={editMode ? (editedImage || displayMember.image) : displayMember.image} \n              alt={`${displayMember.name} - ${displayMember.role}`}\n              className=\"profile-image\"\n              onError={(e) => console.error('❌ Image failed to load:', e.target.src)}\n              onLoad={() => console.log('✅ Image loaded successfully:', displayMember.image)}\n            />\n          </div>\n          \n          <div className=\"profile-info-section\">\n            <div className=\"profile-header\">\n              <h1 className=\"profile-name\">{displayMember.name}</h1>\n              <h2 className=\"profile-role\">{displayMember.role}</h2>\n              {isAdmin && (\n                <div className=\"profile-actions\">\n                  {editMode ? (\n                    <div className=\"edit-actions\">\n                      <button \n                        className=\"btn btn-primary\" \n                        onClick={handleSave}\n                        disabled={saving}\n                      >\n                        {saving ? 'Saving...' : 'Save Changes'}\n                      </button>\n                      <button \n                        className=\"btn btn-secondary\" \n                        onClick={handleCancel}\n                        disabled={saving}\n                      >\n                        Cancel\n                      </button>\n                    </div>\n                  ) : (\n                    <button \n                      className=\"btn btn-edit\" \n                      onClick={handleEdit}\n                    >\n                      Edit Bio\n                    </button>\n                  )}\n                </div>\n              )}\n            </div>\n            \n            {editMode ? (\n              <div className=\"edit-form\">\n                <div className=\"image-upload-section\">\n                  <label htmlFor=\"profile-image\" className=\"image-upload-label\">\n                    <div className=\"image-preview\">\n                                           <img \n                                              src={editedImage || displayMember.image}\n                       alt={`${displayMember.name} - ${displayMember.role}`}\n                       className=\"preview-image\"\n                     />\n                      <div className=\"image-overlay\">\n                        <span>Click to change image</span>\n                      </div>\n                    </div>\n                  </label>\n                  <input\n                    id=\"profile-image\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={(e) => {\n                      const file = e.target.files[0];\n                      if (file) {\n                        const imageUrl = URL.createObjectURL(file);\n                        setEditedImage(imageUrl);\n                      }\n                    }}\n                    style={{ display: 'none' }}\n                  />\n                  <p className=\"image-upload-help\">\n                    Click the image above to upload a new profile picture\n                  </p>\n                </div>\n                \n                <div className=\"bio-edit-section\">\n                  <label htmlFor=\"bio-textarea\" className=\"form-label\">Bio:</label>\n                  <textarea\n                    id=\"bio-textarea\"\n                    value={editedBio}\n                    onChange={(e) => setEditedBio(e.target.value)}\n                    className=\"bio-textarea\"\n                    rows=\"10\"\n                    placeholder=\"Enter the team member's bio...\"\n                  />\n                </div>\n              </div>\n                          ) : (\n                <div className=\"profile-bio\">\n                  {displayMember.bio.split('\\n\\n').map((paragraph, index) => (\n                    <p key={index}>{paragraph}</p>\n                  ))}\n                </div>\n              )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}