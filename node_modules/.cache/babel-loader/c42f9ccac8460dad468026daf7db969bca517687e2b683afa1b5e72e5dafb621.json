{"ast":null,"code":"var _jsxFileName = \"/Users/jadeclement/Documents/Developer/uofttri/src/components/Forum.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { useWorkoutEdit } from '../hooks/useWorkoutEdit';\nimport './Forum.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Forum = () => {\n  _s();\n  const {\n    currentUser,\n    isMember,\n    isExec,\n    isCoach,\n    getUserRole\n  } = useAuth();\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState('workouts');\n  const [workoutPosts, setWorkoutPosts] = useState([]);\n  const [eventPosts, setEventPosts] = useState([]);\n  const [newWorkout, setNewWorkout] = useState('');\n  const [newEvent, setNewEvent] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [showWorkoutForm, setShowWorkoutForm] = useState(false);\n  const [showEventForm, setShowEventForm] = useState(false);\n  const [workoutFilter, setWorkoutFilter] = useState('all');\n  const [timeFilter, setTimeFilter] = useState('upcoming'); // 'upcoming' | 'past'\n  const [pastPage, setPastPage] = useState(1);\n  const [pastPagination, setPastPagination] = useState({\n    currentPage: 1,\n    totalPages: 1,\n    totalPosts: 0,\n    hasMore: false\n  });\n  const [workoutForm, setWorkoutForm] = useState({\n    title: '',\n    type: 'spin',\n    date: '',\n    time: '',\n    content: '',\n    capacity: ''\n  });\n  const [eventForm, setEventForm] = useState({\n    title: '',\n    date: '',\n    content: ''\n  });\n  // Inline edit state for events (admin/exec)\n  const [editingEvent, setEditingEvent] = useState(null);\n  const [eventEditForm, setEventEditForm] = useState({\n    title: '',\n    date: '',\n    content: ''\n  });\n  const [savingEvent, setSavingEvent] = useState(false);\n  const [workoutSignups, setWorkoutSignups] = useState({});\n  const [workoutWaitlists, setWorkoutWaitlists] = useState({});\n  const [eventRsvps, setEventRsvps] = useState({});\n  const [showCancelModal, setShowCancelModal] = useState(false);\n  const [workoutToCancel, setWorkoutToCancel] = useState(null);\n  const [showPromotionMessage, setShowPromotionMessage] = useState(false);\n  const [promotedWorkout, setPromotedWorkout] = useState(null);\n  const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5001/api';\n  const [workoutsLoading, setWorkoutsLoading] = useState(false);\n\n  // Reload when time filter or past page changes\n  useEffect(() => {\n    if (isMember(currentUser)) {\n      loadForumPosts();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [timeFilter, pastPage]);\n\n  // Function to check if a workout type is allowed for the user's sport\n  const isWorkoutTypeAllowed = workoutType => {\n    console.log('🔍 isWorkoutTypeAllowed debug:', {\n      currentUser: currentUser,\n      sport: currentUser === null || currentUser === void 0 ? void 0 : currentUser.sport,\n      workoutType: workoutType\n    });\n    if (!currentUser || !currentUser.sport) {\n      console.log('🔍 No sport preference, showing all workouts');\n      return true; // Show all if no sport preference\n    }\n    const sport = currentUser.sport;\n    const isAllowed = (() => {\n      switch (sport) {\n        case 'run_only':\n          return workoutType === 'run';\n        case 'duathlon':\n          return ['run', 'outdoor-ride', 'brick'].includes(workoutType);\n        case 'triathlon':\n          return ['run', 'outdoor-ride', 'brick', 'swim', 'spin'].includes(workoutType);\n        default:\n          return true;\n        // Show all for unknown sports\n      }\n    })();\n    console.log('🔍 Sport filtering result:', {\n      sport,\n      workoutType,\n      isAllowed\n    });\n    return isAllowed;\n  };\n\n  // Function to get allowed workout types for the current user's sport\n  const getAllowedWorkoutTypes = () => {\n    if (!currentUser || !currentUser.sport) {\n      // Show all types if no sport preference\n      return [{\n        value: 'spin',\n        label: 'Spin'\n      }, {\n        value: 'outdoor-ride',\n        label: 'Outdoor Ride'\n      }, {\n        value: 'run',\n        label: 'Run'\n      }, {\n        value: 'swim',\n        label: 'Swim'\n      }, {\n        value: 'brick',\n        label: 'Brick (Bike + Run)'\n      }, {\n        value: 'other',\n        label: 'Other'\n      }];\n    }\n    const sport = currentUser.sport;\n    switch (sport) {\n      case 'run_only':\n        return [{\n          value: 'run',\n          label: 'Run'\n        }, {\n          value: 'other',\n          label: 'Other'\n        }];\n      case 'duathlon':\n        return [{\n          value: 'run',\n          label: 'Run'\n        }, {\n          value: 'outdoor-ride',\n          label: 'Outdoor Ride'\n        }, {\n          value: 'brick',\n          label: 'Brick (Bike + Run)'\n        }, {\n          value: 'other',\n          label: 'Other'\n        }];\n      case 'triathlon':\n        return [{\n          value: 'run',\n          label: 'Run'\n        }, {\n          value: 'outdoor-ride',\n          label: 'Outdoor Ride'\n        }, {\n          value: 'brick',\n          label: 'Brick (Bike + Run)'\n        }, {\n          value: 'swim',\n          label: 'Swim'\n        }, {\n          value: 'spin',\n          label: 'Spin'\n        }, {\n          value: 'other',\n          label: 'Other'\n        }];\n      default:\n        return [{\n          value: 'spin',\n          label: 'Spin'\n        }, {\n          value: 'outdoor-ride',\n          label: 'Outdoor Ride'\n        }, {\n          value: 'run',\n          label: 'Run'\n        }, {\n          value: 'swim',\n          label: 'Swim'\n        }, {\n          value: 'brick',\n          label: 'Brick (Bike + Run)'\n        }, {\n          value: 'other',\n          label: 'Other'\n        }];\n    }\n  };\n  const {\n    editingWorkout,\n    editForm,\n    saving,\n    startEdit,\n    cancelEdit,\n    updateField,\n    saveWorkout\n  } = useWorkoutEdit(API_BASE_URL);\n  useEffect(() => {\n    if (!currentUser) {\n      navigate('/login');\n      return;\n    }\n\n    // If user is at least member, load posts. If pending, we'll render a gate message.\n    if (isMember(currentUser)) {\n      loadForumPosts();\n    } else {\n      // Ensure we don't stay stuck on loading for pending users\n      setLoading(false);\n    }\n  }, [currentUser, navigate, isMember]);\n\n  // Listen for profile updates to refresh profile pictures\n  useEffect(() => {\n    const handleProfileUpdate = event => {\n      console.log('🔄 Profile updated event received in Forum, refreshing posts...');\n      loadForumPosts();\n    };\n    window.addEventListener('profileUpdated', handleProfileUpdate);\n    return () => {\n      window.removeEventListener('profileUpdated', handleProfileUpdate);\n    };\n  }, []);\n\n  // Check for tab query parameter and set active tab accordingly\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const tabParam = urlParams.get('tab');\n    if (tabParam === 'events') {\n      setActiveTab('events');\n    } else if (tabParam === 'workouts') {\n      setActiveTab('workouts');\n    }\n    // If no tab param or invalid value, default to 'workouts' (existing behavior)\n  }, []);\n  const loadForumPosts = async () => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      // Load workout posts\n      const qp = new URLSearchParams();\n      qp.set('type', 'workout');\n      // Upcoming loads without pagination; past loads paginated 4/page\n      if (timeFilter === 'past') {\n        qp.set('time', 'past');\n        qp.set('page', String(pastPage));\n        qp.set('limit', '4');\n      } else {\n        qp.set('time', 'upcoming');\n      }\n      setWorkoutsLoading(true);\n      const workoutResponse = await fetch(`${API_BASE_URL}/forum/posts?${qp.toString()}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (workoutResponse.ok) {\n        const workoutData = await workoutResponse.json();\n        console.log('🔍 Workout data received:', workoutData);\n\n        // Ensure we have valid posts data\n        const posts = workoutData.posts || workoutData || [];\n        console.log('🔍 Posts to set:', posts);\n\n        // Filter out any invalid posts\n        const validPosts = posts.filter(post => post && post.id && typeof post === 'object');\n        console.log('🔍 Valid posts:', validPosts);\n        setWorkoutPosts(validPosts);\n        if (timeFilter === 'past' && workoutData.pagination) {\n          setPastPagination(workoutData.pagination);\n        }\n\n        // Do not load per-workout signups/waitlists here; fetch on demand in detail view\n      }\n\n      // Load event posts only when Events tab is active to speed up initial load\n      if (activeTab === 'events') {\n        const eventResponse = await fetch(`${API_BASE_URL}/forum/posts?type=event`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (eventResponse.ok) {\n          const eventData = await eventResponse.json();\n          console.log('🔍 Event data received:', eventData);\n\n          // Ensure we have valid posts data\n          const posts = eventData.posts || eventData || [];\n          console.log('🔍 Event posts to set:', posts);\n\n          // Filter out any invalid posts\n          const validPosts = posts.filter(post => post && post.id && typeof post === 'object');\n          console.log('🔍 Valid event posts:', validPosts);\n          setEventPosts(validPosts);\n\n          // Load RSVP data for all events\n          await loadEventRsvps(validPosts);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading forum posts:', error);\n    } finally {\n      setLoading(false);\n      setWorkoutsLoading(false);\n    }\n  };\n\n  // When switching to Events tab, fetch events on demand\n  useEffect(() => {\n    if (activeTab === 'events' && isMember(currentUser)) {\n      loadForumPosts();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeTab]);\n  const loadWorkoutSignups = async workouts => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) return;\n      const signupsData = {};\n      for (const workout of workouts) {\n        const signupsResponse = await fetch(`${API_BASE_URL}/forum/workouts/${workout.id}/signups`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (signupsResponse.ok) {\n          const data = await signupsResponse.json();\n          signupsData[workout.id] = data.signups || [];\n          console.log(`🔍 Workout ${workout.id} signups:`, data.signups || []);\n        }\n      }\n      setWorkoutSignups(signupsData);\n      console.log('📊 All workout signups loaded:', signupsData);\n      console.log('🔍 Current workoutSignups state structure:', Object.keys(signupsData).map(key => {\n        var _signupsData$key;\n        return {\n          workoutId: key,\n          signupCount: ((_signupsData$key = signupsData[key]) === null || _signupsData$key === void 0 ? void 0 : _signupsData$key.length) || 0,\n          signups: signupsData[key] || []\n        };\n      }));\n    } catch (error) {\n      console.error('Error loading workout signups:', error);\n    }\n  };\n  const loadWorkoutWaitlists = async workouts => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) return;\n      const waitlistData = {};\n      for (const workout of workouts) {\n        const waitlistResponse = await fetch(`${API_BASE_URL}/forum/workouts/${workout.id}/waitlist`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (waitlistResponse.ok) {\n          const data = await waitlistResponse.json();\n          waitlistData[workout.id] = data.waitlist || [];\n        }\n      }\n      setWorkoutWaitlists(waitlistData);\n    } catch (error) {\n      console.error('Error loading workout waitlists:', error);\n    }\n  };\n  const loadEventRsvps = async events => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) return;\n      const rsvpsData = {};\n      for (const event of events) {\n        const rsvpsResponse = await fetch(`${API_BASE_URL}/forum/events/${event.id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (rsvpsResponse.ok) {\n          const data = await rsvpsResponse.json();\n          rsvpsData[event.id] = data.rsvps || [];\n          console.log(`🔍 Event ${event.id} RSVPs:`, data.rsvps || []);\n        }\n      }\n      setEventRsvps(rsvpsData);\n      console.log('📊 All event RSVPs loaded:', rsvpsData);\n    } catch (error) {\n      console.error('Error loading event RSVPs:', error);\n    }\n  };\n\n  // Event edit helpers\n  const startEventEdit = eventPost => {\n    setEditingEvent(eventPost.id);\n    setEventEditForm({\n      title: eventPost.title || '',\n      date: eventPost.event_date ? String(eventPost.event_date).split('T')[0] : '',\n      content: eventPost.content || ''\n    });\n  };\n  const cancelEventEdit = () => {\n    setEditingEvent(null);\n    setEventEditForm({\n      title: '',\n      date: '',\n      content: ''\n    });\n  };\n  const updateEventField = (field, value) => {\n    setEventEditForm(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const saveEvent = async eventId => {\n    try {\n      setSavingEvent(true);\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) throw new Error('No authentication token found');\n      const body = {\n        title: eventEditForm.title,\n        eventDate: eventEditForm.date,\n        content: eventEditForm.content\n      };\n      const response = await fetch(`${API_BASE_URL}/forum/posts/${eventId}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(body)\n      });\n      if (!response.ok) {\n        const err = await response.json().catch(() => ({}));\n        throw new Error(err.error || 'Failed to update event');\n      }\n      setSavingEvent(false);\n      setEditingEvent(null);\n      await loadForumPosts();\n    } catch (error) {\n      console.error('Error updating event:', error);\n      setSavingEvent(false);\n      alert(error.message || 'Error updating event');\n    }\n  };\n  const handleWorkoutSignUp = async workoutId => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      // Check if user is already signed up\n      const isCurrentlySignedUp = isUserSignedUp(workoutId);\n      if (!isCurrentlySignedUp) {\n        // Check capacity limit before allowing sign-up\n        const workout = workoutPosts.find(w => w.id === workoutId);\n        if (workout && workout.capacity) {\n          var _workoutSignups$worko;\n          const currentSignups = ((_workoutSignups$worko = workoutSignups[workoutId]) === null || _workoutSignups$worko === void 0 ? void 0 : _workoutSignups$worko.length) || 0;\n          if (currentSignups >= workout.capacity) {\n            alert(`Sorry, this workout is full! Maximum capacity: ${workout.capacity} people.`);\n            return;\n          }\n        }\n      }\n      const response = await fetch(`${API_BASE_URL}/forum/workouts/${workoutId}/signup`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const result = await response.json();\n\n        // Reload signup data from backend to ensure accuracy\n        await loadWorkoutSignups(workoutPosts);\n\n        // Also reload waitlist data in case someone was promoted\n        await loadWorkoutWaitlists(workoutPosts);\n      } else {\n        const error = await response.json();\n        console.error('Error updating signup:', error.error);\n      }\n    } catch (error) {\n      console.error('Error updating signup:', error);\n    }\n  };\n  const isUserSignedUp = workoutId => {\n    if (!workoutId) return false;\n    const signups = workoutSignups[workoutId] || [];\n    return signups.some(signup => signup && signup.user_id === currentUser.id);\n  };\n  const isWorkoutFull = workoutId => {\n    var _workoutSignups$worko2;\n    if (!workoutId) return false;\n    const workout = workoutPosts.find(w => w && w.id === workoutId);\n    if (!workout || !workout.capacity) return false;\n    const currentSignups = ((_workoutSignups$worko2 = workoutSignups[workoutId]) === null || _workoutSignups$worko2 === void 0 ? void 0 : _workoutSignups$worko2.length) || 0;\n    return currentSignups >= workout.capacity;\n  };\n  const isWorkoutArchived = post => {\n    if (!post || !post.workout_date) return false;\n    try {\n      // Parse the workout date and get just the date part (YYYY-MM-DD)\n      const workoutDate = new Date(post.workout_date);\n      if (isNaN(workoutDate.getTime())) return false;\n\n      // Get today's date in the same timezone as the workout date\n      const today = new Date();\n\n      // Compare dates by converting both to YYYY-MM-DD format\n      const workoutDateStr = workoutDate.toISOString().split('T')[0];\n      const todayStr = today.toISOString().split('T')[0];\n      return workoutDateStr < todayStr;\n    } catch (_) {\n      return false;\n    }\n  };\n  const isUserOnWaitlist = workoutId => {\n    var _workoutWaitlists$wor;\n    if (!workoutId) return false;\n    return ((_workoutWaitlists$wor = workoutWaitlists[workoutId]) === null || _workoutWaitlists$wor === void 0 ? void 0 : _workoutWaitlists$wor.some(waitlist => waitlist && waitlist.user_id === currentUser.id)) || false;\n  };\n\n  // Returns 1-based position or null if not on waitlist\n  const getWaitlistPosition = workoutId => {\n    if (!workoutId) return null;\n    const list = workoutWaitlists[workoutId] || [];\n    const idx = list.findIndex(w => w && w.user_id === currentUser.id);\n    return idx === -1 ? null : idx + 1;\n  };\n  const formatOrdinal = n => {\n    if (n == null) return '';\n    const s = [\"th\", \"st\", \"nd\", \"rd\"],\n      v = n % 100;\n    return n + (s[(v - 20) % 10] || s[v] || s[0]);\n  };\n\n  // Event RSVP functions\n  const handleEventRsvp = async (eventId, status) => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      // Call backend API to save RSVP\n      const response = await fetch(`${API_BASE_URL}/forum/events/${eventId}/rsvp`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          status\n        })\n      });\n      if (response.ok) {\n        const result = await response.json();\n\n        // Update local state based on backend response\n        const currentRsvps = eventRsvps[eventId] || [];\n        if (result.status === null) {\n          // RSVP was removed\n          const filteredRsvps = currentRsvps.filter(r => r.user_id !== currentUser.id);\n          setEventRsvps(prev => ({\n            ...prev,\n            [eventId]: filteredRsvps\n          }));\n        } else {\n          // RSVP was added/updated\n          const filteredRsvps = currentRsvps.filter(r => r.user_id !== currentUser.id);\n          const newRsvp = {\n            id: Date.now(),\n            user_id: currentUser.id,\n            user_name: currentUser.name,\n            status: result.status,\n            signed_up_at: new Date().toISOString().split('T')[0]\n          };\n          setEventRsvps(prev => ({\n            ...prev,\n            [eventId]: [...filteredRsvps, newRsvp]\n          }));\n        }\n        console.log('Event RSVP updated:', result);\n      } else {\n        const error = await response.json();\n        console.error('Error updating RSVP:', error.error);\n        alert(error.error || 'Error updating RSVP');\n      }\n    } catch (error) {\n      console.error('Error updating event RSVP:', error);\n      alert('Error updating RSVP');\n    }\n  };\n  const getUserRsvpStatus = eventId => {\n    if (!eventId) return null;\n    const rsvps = eventRsvps[eventId] || [];\n    const userRsvp = rsvps.find(rsvp => rsvp.user_id === currentUser.id);\n    return userRsvp ? userRsvp.status : null;\n  };\n  const handleWaitlistJoin = async workoutId => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/forum/workouts/${workoutId}/waitlist`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        // Refresh waitlist data\n        await loadWorkoutWaitlists(workoutPosts);\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Failed to join waitlist');\n      }\n    } catch (error) {\n      console.error('Error joining waitlist:', error);\n      alert('Failed to join waitlist');\n    }\n  };\n  const handleWaitlistLeave = async workoutId => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/forum/workouts/${workoutId}/waitlist`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        // Refresh waitlist data\n        await loadWorkoutWaitlists(workoutPosts);\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Failed to leave waitlist');\n      }\n    } catch (error) {\n      console.error('Error leaving waitlist:', error);\n      alert('Failed to leave waitlist');\n    }\n  };\n  const handleCancelClick = workoutId => {\n    setWorkoutToCancel(workoutId);\n    setShowCancelModal(true);\n  };\n  const handleCancelConfirm = async () => {\n    if (!workoutToCancel) return;\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/forum/workouts/${workoutToCancel}/signup`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        // Refresh both signup and waitlist data since someone might have been promoted\n        await loadWorkoutSignups(workoutPosts);\n        await loadWorkoutWaitlists(workoutPosts);\n        setShowCancelModal(false);\n        setWorkoutToCancel(null);\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Failed to cancel signup');\n      }\n    } catch (error) {\n      console.error('Error canceling signup:', error);\n      alert('Failed to cancel signup');\n    }\n  };\n  const handleCancelCancel = () => {\n    setShowCancelModal(false);\n    setWorkoutToCancel(null);\n  };\n\n  // Check if user was promoted from waitlist after data refresh\n  const checkForWaitlistPromotion = workoutId => {\n    var _workoutWaitlists$wor2, _workoutSignups$worko3;\n    const wasOnWaitlist = (_workoutWaitlists$wor2 = workoutWaitlists[workoutId]) === null || _workoutWaitlists$wor2 === void 0 ? void 0 : _workoutWaitlists$wor2.some(w => w.user_id === currentUser.id);\n    const isNowSignedUp = (_workoutSignups$worko3 = workoutSignups[workoutId]) === null || _workoutSignups$worko3 === void 0 ? void 0 : _workoutSignups$worko3.some(s => s.user_id === currentUser.id);\n    if (wasOnWaitlist && isNowSignedUp) {\n      // User was promoted from waitlist!\n      const workout = workoutPosts.find(w => w.id === workoutId);\n      setPromotedWorkout(workout);\n      setShowPromotionMessage(true);\n\n      // Auto-hide after 10 seconds\n      setTimeout(() => {\n        setShowPromotionMessage(false);\n        setPromotedWorkout(null);\n      }, 10000);\n    }\n  };\n  const handleSubmitWorkout = async e => {\n    e.preventDefault();\n    if (!workoutForm.title.trim() || !workoutForm.date || !workoutForm.time || !workoutForm.content.trim()) return;\n\n    // Check if the selected date is in the future\n    const selectedDate = new Date(workoutForm.date);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Reset time to start of day for accurate comparison\n\n    if (selectedDate <= today) {\n      alert('Please select a future date for your workout.');\n      return;\n    }\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/forum/posts`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          title: workoutForm.title.trim(),\n          workoutType: workoutForm.type,\n          workoutDate: workoutForm.date,\n          workoutTime: workoutForm.time,\n          content: workoutForm.content.trim(),\n          capacity: workoutForm.capacity ? parseInt(workoutForm.capacity) : null,\n          type: 'workout'\n        })\n      });\n      if (response.ok) {\n        const newPostData = await response.json();\n        console.log('🔍 New workout data received:', newPostData);\n\n        // Check if the response has the expected structure\n        if (newPostData.post) {\n          setWorkoutPosts([newPostData.post, ...workoutPosts]);\n          console.log('✅ Workout added to state');\n        } else if (newPostData.id) {\n          // If the response is the post directly\n          setWorkoutPosts([newPostData, ...workoutPosts]);\n          console.log('✅ Workout added to state (direct response)');\n        } else {\n          console.error('❌ Unexpected response structure:', newPostData);\n          // Fallback: reload all posts\n          console.log('🔄 Reloading all posts as fallback...');\n          loadForumPosts();\n        }\n        setWorkoutForm({\n          title: '',\n          type: 'spin',\n          date: '',\n          time: '',\n          content: '',\n          capacity: ''\n        });\n        setShowWorkoutForm(false);\n      } else {\n        console.error('Failed to create workout post');\n      }\n    } catch (error) {\n      console.error('Error creating workout post:', error);\n    }\n  };\n  const handleSubmitEvent = async e => {\n    e.preventDefault();\n    if (!eventForm.title.trim() || !eventForm.date || !eventForm.content.trim()) return;\n\n    // Check if the selected date is in the future\n    const selectedDate = new Date(eventForm.date);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Reset time to start of day for accurate comparison\n\n    if (selectedDate <= today) {\n      alert('Please select a future date for your event.');\n      return;\n    }\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/forum/posts`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          title: eventForm.title.trim(),\n          eventDate: eventForm.date,\n          content: eventForm.content.trim(),\n          type: 'event'\n        })\n      });\n      if (response.ok) {\n        const newPostData = await response.json();\n        setEventPosts([newPostData.post, ...eventPosts]);\n        setEventForm({\n          title: '',\n          date: '',\n          content: ''\n        });\n        setShowEventForm(false);\n      } else {\n        console.error('Failed to create event post');\n      }\n    } catch (error) {\n      console.error('Error creating event post:', error);\n    }\n  };\n  const handleLike = async postId => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/forum/posts/${postId}/like`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        // Reload posts to get updated like count\n        loadForumPosts();\n      } else {\n        console.error('Failed to like post');\n      }\n    } catch (error) {\n      console.error('Error liking post:', error);\n    }\n  };\n  const handleDeleteWorkout = async postId => {\n    if (!window.confirm('Are you sure you want to delete this workout post?')) {\n      return;\n    }\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/forum/posts/${postId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        loadForumPosts();\n      } else {\n        console.error('Failed to delete workout post');\n      }\n    } catch (error) {\n      console.error('Error deleting workout post:', error);\n    }\n  };\n  const handleDeleteEvent = async postId => {\n    if (!window.confirm('Are you sure you want to delete this event post?')) {\n      return;\n    }\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/forum/posts/${postId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        loadForumPosts();\n      } else {\n        console.error('Failed to delete event post');\n      }\n    } catch (error) {\n      console.error('Error deleting event post:', error);\n    }\n  };\n\n  // Date helpers (treat YYYY-MM-DD as UTC to avoid TZ shifting)\n  const parseDateOnlyUTC = dateStr => {\n    if (!dateStr) return null;\n    const base = typeof dateStr === 'string' ? dateStr.split('T')[0] : dateStr;\n    const parts = base.split('-');\n    if (parts.length !== 3) return new Date(dateStr);\n    const [y, m, d] = parts.map(Number);\n    return new Date(Date.UTC(y, m - 1, d));\n  };\n  const formatDateOnlyUTC = dateStr => {\n    const d = parseDateOnlyUTC(dateStr);\n    if (!d || isNaN(d.getTime())) return '';\n    return d.toLocaleDateString(undefined, {\n      timeZone: 'UTC'\n    });\n  };\n\n  // Helpers for date filtering\n  const isPast = dateStr => {\n    try {\n      if (!dateStr) return false;\n      const d = parseDateOnlyUTC(dateStr);\n      if (!d || isNaN(d.getTime())) return false;\n      const today = new Date();\n      today.setUTCHours(0, 0, 0, 0);\n      return d < today;\n    } catch (_) {\n      return false;\n    }\n  };\n\n  // Filter workouts based on selected filters (time + type + sport)\n  const getFilteredWorkouts = () => {\n    // First filter by sport preference\n    const bySport = workoutPosts.filter(post => {\n      return isWorkoutTypeAllowed(post.workout_type);\n    });\n\n    // Then filter by time\n    const byTime = bySport.filter(post => {\n      const past = isPast(post.workout_date);\n      return timeFilter === 'past' ? past : !past;\n    });\n\n    // Sort by actual workout_date, not created_at\n    byTime.sort((a, b) => {\n      const da = a && a.workout_date ? parseDateOnlyUTC(a.workout_date) : new Date(0);\n      const db = b && b.workout_date ? parseDateOnlyUTC(b.workout_date) : new Date(0);\n      return timeFilter === 'past' ? db - da : da - db; // past: newest first, upcoming: soonest first\n    });\n    if (workoutFilter === 'all') return byTime;\n    return byTime.filter(post => {\n      switch (workoutFilter) {\n        case 'bike':\n          return post.workout_type === 'spin' || post.workout_type === 'outdoor-ride' || post.workout_type === 'brick';\n        case 'swim':\n          return post.workout_type === 'swim';\n        case 'run':\n          return post.workout_type === 'run';\n        default:\n          return true;\n      }\n    });\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 989,\n      columnNumber: 12\n    }, this);\n  }\n  if (!currentUser) {\n    return null;\n  }\n\n  // Gate for pending users: show message instead of forum content\n  if (!isMember(currentUser) && !isCoach(currentUser) && !isExec(currentUser)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"forum-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"section-title\",\n          children: \"Team Forum\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1001,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notice-card\",\n          style: {\n            background: '#fff8e1',\n            border: '1px solid #facc15',\n            color: '#92400e',\n            padding: '16px',\n            borderRadius: '8px',\n            lineHeight: 1.6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0\n            },\n            children: [\"You don't have access to the forum yet. Please email \", /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"mailto:info@uoft-tri.club\",\n              children: \"info@uoft-tri.club\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1011,\n              columnNumber: 68\n            }, this), \" your membership receipt and we will confirm your registration! You will have to log out and then log back in to see this page.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1010,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: '12px 0 0 0',\n              fontSize: '14px',\n              opacity: 0.9\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Note:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1014,\n              columnNumber: 15\n            }, this), \" If you were a member on our old website, you'll be automatically approved as a member once you sign up. You will get an email once you get access!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1013,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1002,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1000,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 999,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"forum-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"section-title\",\n        children: \"Team Forum\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1025,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"section-subtitle\",\n        children: \"Connect with your teammates and discuss training, races, and more!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1026,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"forum-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'workouts' ? 'active' : ''}`,\n          onClick: () => setActiveTab('workouts'),\n          children: \"\\uD83C\\uDFC3\\u200D\\u2642\\uFE0F Workouts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1030,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'events' ? 'active' : ''}`,\n          onClick: () => setActiveTab('events'),\n          children: \"\\uD83C\\uDF89 Events\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1036,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1029,\n        columnNumber: 9\n      }, this), activeTab === 'workouts' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"workouts-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Workout Posts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1048,\n            columnNumber: 15\n          }, this), (isExec(currentUser) || isCoach(currentUser)) && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"new-post-btn\",\n            onClick: () => setShowWorkoutForm(true),\n            children: \"+ New Workout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1050,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1047,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"workout-filters\",\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `filter-btn ${timeFilter === 'upcoming' ? 'active' : ''}`,\n              onClick: () => {\n                setTimeFilter('upcoming');\n                setPastPage(1);\n              },\n              children: \"\\u23F3 Upcoming\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1062,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `filter-btn ${timeFilter === 'past' ? 'active' : ''}`,\n              onClick: () => {\n                setTimeFilter('past');\n                setPastPage(1);\n              },\n              children: \"\\uD83D\\uDDC2 Past\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1068,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1061,\n            columnNumber: 15\n          }, this), timeFilter === 'past' && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 13,\n                color: '#6b7280'\n              },\n              children: [\"Page \", pastPagination.currentPage, \" of \", pastPagination.totalPages]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1078,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"filter-btn\",\n              onClick: () => setPastPage(p => Math.max(1, p - 1)),\n              disabled: pastPagination.currentPage <= 1,\n              children: \"Previous\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1079,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"filter-btn\",\n              onClick: () => setPastPage(p => Math.min(pastPagination.totalPages, p + 1)),\n              disabled: pastPagination.currentPage >= pastPagination.totalPages,\n              children: \"Next\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1086,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1077,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1060,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"workout-filters\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `filter-btn ${workoutFilter === 'all' ? 'active' : ''}`,\n            onClick: () => setWorkoutFilter('all'),\n            children: \"\\uD83C\\uDFC1 All Types\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1099,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `filter-btn ${workoutFilter === 'bike' ? 'active' : ''}`,\n            onClick: () => setWorkoutFilter('bike'),\n            children: \"\\uD83D\\uDEB4\\u200D\\u2642\\uFE0F Bike (Indoor/Outdoor/Brick)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `filter-btn ${workoutFilter === 'swim' ? 'active' : ''}`,\n            onClick: () => setWorkoutFilter('swim'),\n            children: \"\\uD83C\\uDFCA\\u200D\\u2642\\uFE0F Swim\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1111,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `filter-btn ${workoutFilter === 'run' ? 'active' : ''}`,\n            onClick: () => setWorkoutFilter('run'),\n            children: \"\\uD83C\\uDFC3\\u200D\\u2640\\uFE0F Run\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1117,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1098,\n          columnNumber: 13\n        }, this), getFilteredWorkouts().length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-posts\",\n          children: workoutsLoading ? 'Loading workouts...' : workoutPosts.length === 0 ? 'No workout posts yet.' : `No ${workoutFilter === 'all' ? '' : workoutFilter} workouts found.`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1126,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"posts-list\",\n          children: getFilteredWorkouts().filter(post => post && post.id).map(post => {\n            var _post$signup_count, _post$signup_count2, _post$signup_count3, _post$signup_count4;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"post-card workout-post\",\n              onClick: () => window.location.href = `/workout/${post.id}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"post-header\",\n                children: [post.title ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"workout-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                    children: post.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1140,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1139,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"workout-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                    children: \"Untitled Workout\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1146,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1145,\n                  columnNumber: 25\n                }, this), (currentUser.id === post.user_id || currentUser.role === 'exec' || currentUser.role === 'administrator') && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"workout-actions-admin\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"edit-btn\",\n                    onClick: e => {\n                      e.stopPropagation();\n                      startEdit(post);\n                    },\n                    disabled: editingWorkout === post.id,\n                    children: \"\\u270F\\uFE0F Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1153,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"delete-btn\",\n                    onClick: e => {\n                      e.stopPropagation();\n                      handleDeleteWorkout(post.id);\n                    },\n                    disabled: editingWorkout === post.id,\n                    children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1163,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1152,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1137,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"workout-author\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"author-info\",\n                  children: [(() => {\n                    const {\n                      normalizeProfileImageUrl\n                    } = require('../utils/imageUtils');\n                    const url = normalizeProfileImageUrl(post.authorProfilePictureUrl);\n                    return url ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: url,\n                      alt: \"Profile\",\n                      className: \"author-avatar\",\n                      loading: \"lazy\",\n                      decoding: \"async\",\n                      fetchpriority: \"low\",\n                      onError: e => {\n                        e.target.src = '/images/default_profile.png';\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1183,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"/images/default_profile.png\",\n                      alt: \"Profile\",\n                      className: \"author-avatar\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1195,\n                      columnNumber: 29\n                    }, this);\n                  })(), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"author-name\",\n                    children: [\"Posted by \", post.author_name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1203,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1178,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1177,\n                columnNumber: 21\n              }, this), editingWorkout === post.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"workout-edit-form\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: `edit-title-${post.id}`,\n                    children: \"Title:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1210,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: `edit-title-${post.id}`,\n                    type: \"text\",\n                    value: editForm.title,\n                    onChange: e => updateField('title', e.target.value),\n                    className: \"form-input\",\n                    placeholder: \"Enter workout title...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1211,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1209,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: `edit-type-${post.id}`,\n                      children: \"Workout Type:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1223,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      id: `edit-type-${post.id}`,\n                      type: \"text\",\n                      value: editForm.workoutType,\n                      onChange: e => updateField('workoutType', e.target.value),\n                      className: \"form-input\",\n                      placeholder: \"Enter workout type...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1224,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1222,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: `edit-capacity-${post.id}`,\n                      children: \"Capacity:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1235,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      id: `edit-capacity-${post.id}`,\n                      type: \"number\",\n                      min: \"1\",\n                      value: editForm.capacity,\n                      onChange: e => updateField('capacity', e.target.value),\n                      className: \"form-input\",\n                      placeholder: \"Enter capacity...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1236,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1234,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1221,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: `edit-date-${post.id}`,\n                      children: \"Date:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1250,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      id: `edit-date-${post.id}`,\n                      type: \"date\",\n                      value: editForm.workoutDate,\n                      onChange: e => updateField('workoutDate', e.target.value),\n                      className: \"form-input\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1251,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1249,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: `edit-time-${post.id}`,\n                      children: \"Time:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1261,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      id: `edit-time-${post.id}`,\n                      type: \"time\",\n                      value: editForm.workoutTime,\n                      onChange: e => updateField('workoutTime', e.target.value),\n                      className: \"form-input\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1262,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1260,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1248,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: `edit-content-${post.id}`,\n                    children: \"Description:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1273,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    id: `edit-content-${post.id}`,\n                    value: editForm.content,\n                    onChange: e => updateField('content', e.target.value),\n                    className: \"form-textarea\",\n                    rows: \"3\",\n                    placeholder: \"Enter workout description...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1274,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1272,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-primary\",\n                    onClick: () => saveWorkout(post.id, loadForumPosts),\n                    disabled: saving,\n                    children: saving ? 'Saving...' : 'Save Changes'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1285,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-secondary\",\n                    onClick: cancelEdit,\n                    disabled: saving,\n                    children: \"Cancel\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1292,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1284,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1208,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: post.workout_type && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"workout-meta\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"workout-type-badge\",\n                    children: post.workout_type\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1305,\n                    columnNumber: 29\n                  }, this), post.workout_date && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"workout-date\",\n                    children: [\"\\uD83D\\uDCC5 \", formatDateOnlyUTC(post.workout_date), post.workout_time && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"workout-time\",\n                      children: [\" \\u2022 \\uD83D\\uDD50 \", post.workout_time]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1310,\n                      columnNumber: 35\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1307,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1304,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"workout-signup-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"button-group\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"signup-btn\",\n                    onClick: e => {\n                      e.stopPropagation();\n                      window.location.href = `/workout/${post.id}`;\n                    },\n                    children: \"View Details\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1324,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1323,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"signup-count\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"signup-main\",\n                    children: post.capacity ? `${(_post$signup_count = post.signup_count) !== null && _post$signup_count !== void 0 ? _post$signup_count : 0}/${post.capacity} signed up` : `${(_post$signup_count2 = post.signup_count) !== null && _post$signup_count2 !== void 0 ? _post$signup_count2 : 0} signed up`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1335,\n                    columnNumber: 25\n                  }, this), post.capacity && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"signup-details\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `capacity-status ${((_post$signup_count3 = post.signup_count) !== null && _post$signup_count3 !== void 0 ? _post$signup_count3 : 0) >= post.capacity ? 'full' : 'available'}`,\n                      children: ((_post$signup_count4 = post.signup_count) !== null && _post$signup_count4 !== void 0 ? _post$signup_count4 : 0) >= post.capacity ? 'Full' : 'Available'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1343,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1342,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1334,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1322,\n                columnNumber: 21\n              }, this)]\n            }, post.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1136,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1134,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1046,\n        columnNumber: 11\n      }, this), activeTab === 'events' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"events-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Event Posts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1362,\n            columnNumber: 15\n          }, this), isExec(currentUser) && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"new-post-btn\",\n            onClick: () => setShowEventForm(true),\n            children: \"+ New Event\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1364,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1361,\n          columnNumber: 13\n        }, this), eventPosts.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-posts\",\n          children: \"No event posts yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1374,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"posts-list\",\n          children: eventPosts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-card event-post\",\n            onClick: () => window.location.href = `/event/${post.id}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"post-header\",\n              children: editingEvent === post.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"event-edit-form\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: `edit-event-title-${post.id}`,\n                    children: \"Title:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1383,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: `edit-event-title-${post.id}`,\n                    type: \"text\",\n                    value: eventEditForm.title,\n                    onChange: e => updateEventField('title', e.target.value),\n                    className: \"form-input\",\n                    placeholder: \"Enter event title...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1384,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1382,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: `edit-event-date-${post.id}`,\n                    children: \"Date:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1395,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: `edit-event-date-${post.id}`,\n                    type: \"date\",\n                    value: eventEditForm.date,\n                    onChange: e => updateEventField('date', e.target.value),\n                    className: \"form-input\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1396,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1394,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: `edit-event-content-${post.id}`,\n                    children: \"Details:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1406,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    id: `edit-event-content-${post.id}`,\n                    value: eventEditForm.content,\n                    onChange: e => updateEventField('content', e.target.value),\n                    className: \"form-textarea\",\n                    rows: \"3\",\n                    placeholder: \"Enter event details...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1407,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1405,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-primary\",\n                    onClick: e => {\n                      e.stopPropagation();\n                      saveEvent(post.id);\n                    },\n                    disabled: savingEvent,\n                    children: savingEvent ? 'Saving...' : 'Save Changes'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1418,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-secondary\",\n                    onClick: e => {\n                      e.stopPropagation();\n                      cancelEventEdit();\n                    },\n                    disabled: savingEvent,\n                    children: \"Cancel\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1425,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1417,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1381,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [post.title && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"event-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: post.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1438,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1437,\n                  columnNumber: 29\n                }, this), (currentUser.id === post.user_id || currentUser.role === 'exec' || currentUser.role === 'administrator') && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"workout-actions-admin\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"edit-btn\",\n                    onClick: e => {\n                      e.stopPropagation();\n                      startEventEdit(post);\n                    },\n                    disabled: editingEvent === post.id,\n                    children: \"\\u270F\\uFE0F Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1447,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"delete-btn\",\n                    onClick: e => {\n                      e.stopPropagation();\n                      handleDeleteEvent(post.id);\n                    },\n                    disabled: editingEvent === post.id,\n                    children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1454,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1446,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1379,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-author\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"author-info\",\n                children: [(() => {\n                  const {\n                    normalizeProfileImageUrl\n                  } = require('../utils/imageUtils');\n                  const url = normalizeProfileImageUrl(post.authorProfilePictureUrl);\n                  return url ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: url,\n                    alt: \"Profile\",\n                    className: \"author-avatar\",\n                    loading: \"lazy\",\n                    decoding: \"async\",\n                    fetchpriority: \"low\",\n                    onError: e => {\n                      e.target.src = '/images/default_profile.png';\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1473,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/images/default_profile.png\",\n                    alt: \"Profile\",\n                    className: \"author-avatar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1485,\n                    columnNumber: 29\n                  }, this);\n                })(), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"author-name\",\n                  children: [\"Posted by \", post.author_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1492,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1468,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1467,\n              columnNumber: 21\n            }, this), post.event_date && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-meta\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"event-date\",\n                children: (() => {\n                  try {\n                    const base = String(post.event_date).split('T')[0];\n                    const [y, m, d] = base.split('-').map(Number);\n                    const dt = new Date(Date.UTC(y, m - 1, d));\n                    return `📅 ${dt.toLocaleDateString(undefined, {\n                      timeZone: 'UTC'\n                    })}`;\n                  } catch {\n                    return `📅 ${post.event_date}`;\n                  }\n                })()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1498,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1497,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"post-footer\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rsvp-buttons\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `rsvp-btn going ${getUserRsvpStatus(post.id) === 'going' ? 'active' : ''}`,\n                  onClick: e => {\n                    e.stopPropagation();\n                    handleEventRsvp(post.id, 'going');\n                  },\n                  children: getUserRsvpStatus(post.id) === 'going' ? '✓ Going' : 'Going'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1515,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `rsvp-btn maybe ${getUserRsvpStatus(post.id) === 'maybe' ? 'active' : ''}`,\n                  onClick: e => {\n                    e.stopPropagation();\n                    handleEventRsvp(post.id, 'maybe');\n                  },\n                  children: getUserRsvpStatus(post.id) === 'maybe' ? '✓ Maybe' : 'Maybe'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1524,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `rsvp-btn not-going ${getUserRsvpStatus(post.id) === 'not_going' ? 'active' : ''}`,\n                  onClick: e => {\n                    e.stopPropagation();\n                    handleEventRsvp(post.id, 'not_going');\n                  },\n                  children: getUserRsvpStatus(post.id) === 'not_going' ? '✓ Not Going' : 'Not Going'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1533,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1514,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1513,\n              columnNumber: 21\n            }, this)]\n          }, post.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1378,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1376,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1360,\n        columnNumber: 11\n      }, this), showPromotionMessage && promotedWorkout && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"promotion-message\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"promotion-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83C\\uDF89 Congratulations!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1555,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"You've been promoted from the waitlist for \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: promotedWorkout.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1556,\n              columnNumber: 61\n            }, this), \"!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1556,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Check your email for details. You're now officially signed up for this workout.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1557,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"promotion-close-btn\",\n            onClick: () => setShowPromotionMessage(false),\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1558,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1554,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1553,\n        columnNumber: 11\n      }, this), showCancelModal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal cancel-modal\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Cancel Workout Signup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1572,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cancel-warning\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u26A0\\uFE0F \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Important:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1574,\n                columnNumber: 23\n              }, this), \" If you cancel less than 12 hours in advance, it will count as an absence.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1574,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Your absences are recorded and once you have three, you will be suspended from signing up for a week.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1575,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"This is to keep it fair for all members!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1576,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1573,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secondary\",\n              onClick: handleCancelCancel,\n              children: \"Keep Booking\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1579,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-danger\",\n              onClick: handleCancelConfirm,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1582,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1578,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1571,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1570,\n        columnNumber: 11\n      }, this), showWorkoutForm && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Create New Workout Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1594,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmitWorkout,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Workout Title:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1597,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: workoutForm.title,\n                onChange: e => setWorkoutForm({\n                  ...workoutForm,\n                  title: e.target.value\n                }),\n                placeholder: \"e.g., Tuesday Morning Swim, Weekend Long Run\",\n                maxLength: \"100\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1598,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1596,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Workout Type:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1609,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: workoutForm.type,\n                onChange: e => setWorkoutForm({\n                  ...workoutForm,\n                  type: e.target.value\n                }),\n                required: true,\n                children: getAllowedWorkoutTypes().map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: option.value,\n                  children: option.label\n                }, option.value, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1616,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1610,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1608,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Workout Date:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1624,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: workoutForm.date,\n                onChange: e => setWorkoutForm({\n                  ...workoutForm,\n                  date: e.target.value\n                }),\n                min: new Date().toISOString().split('T')[0],\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1625,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1623,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Workout Time:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1635,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"time\",\n                value: workoutForm.time,\n                onChange: e => setWorkoutForm({\n                  ...workoutForm,\n                  time: e.target.value\n                }),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1636,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1634,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Additional Details:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1645,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: workoutForm.content,\n                onChange: e => setWorkoutForm({\n                  ...workoutForm,\n                  content: e.target.value\n                }),\n                placeholder: \"Describe the workout, time, location, requirements, what to bring...\",\n                rows: \"4\",\n                maxLength: \"500\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1646,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"char-count\",\n                children: [workoutForm.content.length, \"/500\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1654,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1644,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Capacity (Optional):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1658,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: workoutForm.capacity,\n                onChange: e => setWorkoutForm({\n                  ...workoutForm,\n                  capacity: e.target.value\n                }),\n                placeholder: \"Leave empty for unlimited spots\",\n                min: \"1\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1659,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                children: \"Maximum number of people who can sign up. Leave empty for unlimited spots.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1667,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1657,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary\",\n                children: \"Post Workout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1671,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-secondary\",\n                onClick: () => setShowWorkoutForm(false),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1672,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1670,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1595,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1593,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1592,\n        columnNumber: 11\n      }, this), showEventForm && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Create New Event Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1683,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmitEvent,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Event Title:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1686,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: eventForm.title,\n                onChange: e => setEventForm({\n                  ...eventForm,\n                  title: e.target.value\n                }),\n                placeholder: \"e.g., Club Social Night, Race Watch Party\",\n                maxLength: \"100\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1687,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1685,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Event Date:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1698,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: eventForm.date,\n                onChange: e => setEventForm({\n                  ...eventForm,\n                  date: e.target.value\n                }),\n                min: new Date().toISOString().split('T')[0],\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1699,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1697,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Event Details:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1709,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: eventForm.content,\n                onChange: e => setEventForm({\n                  ...eventForm,\n                  content: e.target.value\n                }),\n                placeholder: \"Describe the event, time, location, what to bring, RSVP details...\",\n                rows: \"4\",\n                maxLength: \"500\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1710,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"char-count\",\n                children: [eventForm.content.length, \"/500\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1718,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1708,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary\",\n                children: \"Post Event\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1722,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-secondary\",\n                onClick: () => setShowEventForm(false),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1723,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1721,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1684,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1682,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1681,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1024,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1023,\n    columnNumber: 5\n  }, this);\n};\n_s(Forum, \"h3xFakLv+Cdpt3MR52DW1AttfYk=\", false, function () {\n  return [useAuth, useNavigate, useWorkoutEdit];\n});\n_c = Forum;\nexport default Forum;\nvar _c;\n$RefreshReg$(_c, \"Forum\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","useNavigate","useWorkoutEdit","jsxDEV","_jsxDEV","Fragment","_Fragment","Forum","_s","currentUser","isMember","isExec","isCoach","getUserRole","navigate","activeTab","setActiveTab","workoutPosts","setWorkoutPosts","eventPosts","setEventPosts","newWorkout","setNewWorkout","newEvent","setNewEvent","loading","setLoading","showWorkoutForm","setShowWorkoutForm","showEventForm","setShowEventForm","workoutFilter","setWorkoutFilter","timeFilter","setTimeFilter","pastPage","setPastPage","pastPagination","setPastPagination","currentPage","totalPages","totalPosts","hasMore","workoutForm","setWorkoutForm","title","type","date","time","content","capacity","eventForm","setEventForm","editingEvent","setEditingEvent","eventEditForm","setEventEditForm","savingEvent","setSavingEvent","workoutSignups","setWorkoutSignups","workoutWaitlists","setWorkoutWaitlists","eventRsvps","setEventRsvps","showCancelModal","setShowCancelModal","workoutToCancel","setWorkoutToCancel","showPromotionMessage","setShowPromotionMessage","promotedWorkout","setPromotedWorkout","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","workoutsLoading","setWorkoutsLoading","loadForumPosts","isWorkoutTypeAllowed","workoutType","console","log","sport","isAllowed","includes","getAllowedWorkoutTypes","value","label","editingWorkout","editForm","saving","startEdit","cancelEdit","updateField","saveWorkout","handleProfileUpdate","event","window","addEventListener","removeEventListener","urlParams","URLSearchParams","location","search","tabParam","get","token","localStorage","getItem","error","qp","set","String","workoutResponse","fetch","toString","headers","ok","workoutData","json","posts","validPosts","filter","post","id","pagination","eventResponse","eventData","loadEventRsvps","loadWorkoutSignups","workouts","signupsData","workout","signupsResponse","data","signups","Object","keys","map","key","_signupsData$key","workoutId","signupCount","length","loadWorkoutWaitlists","waitlistData","waitlistResponse","waitlist","events","rsvpsData","rsvpsResponse","rsvps","startEventEdit","eventPost","event_date","split","cancelEventEdit","updateEventField","field","prev","saveEvent","eventId","Error","body","eventDate","response","method","JSON","stringify","err","catch","alert","message","handleWorkoutSignUp","isCurrentlySignedUp","isUserSignedUp","find","w","_workoutSignups$worko","currentSignups","result","some","signup","user_id","isWorkoutFull","_workoutSignups$worko2","isWorkoutArchived","workout_date","workoutDate","Date","isNaN","getTime","today","workoutDateStr","toISOString","todayStr","_","isUserOnWaitlist","_workoutWaitlists$wor","getWaitlistPosition","list","idx","findIndex","formatOrdinal","n","s","v","handleEventRsvp","status","currentRsvps","filteredRsvps","r","newRsvp","now","user_name","name","signed_up_at","getUserRsvpStatus","userRsvp","rsvp","handleWaitlistJoin","handleWaitlistLeave","handleCancelClick","handleCancelConfirm","handleCancelCancel","checkForWaitlistPromotion","_workoutWaitlists$wor2","_workoutSignups$worko3","wasOnWaitlist","isNowSignedUp","setTimeout","handleSubmitWorkout","e","preventDefault","trim","selectedDate","setHours","workoutTime","parseInt","newPostData","handleSubmitEvent","handleLike","postId","handleDeleteWorkout","confirm","handleDeleteEvent","parseDateOnlyUTC","dateStr","base","parts","y","m","d","Number","UTC","formatDateOnlyUTC","toLocaleDateString","undefined","timeZone","isPast","setUTCHours","getFilteredWorkouts","bySport","workout_type","byTime","past","sort","a","b","da","db","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","background","border","color","padding","borderRadius","lineHeight","margin","href","fontSize","opacity","onClick","display","alignItems","justifyContent","gap","p","Math","max","disabled","min","_post$signup_count","_post$signup_count2","_post$signup_count3","_post$signup_count4","role","stopPropagation","normalizeProfileImageUrl","require","url","authorProfilePictureUrl","src","alt","decoding","fetchpriority","onError","target","author_name","htmlFor","onChange","placeholder","rows","workout_time","signup_count","dt","onSubmit","maxLength","required","option","_c","$RefreshReg$"],"sources":["/Users/jadeclement/Documents/Developer/uofttri/src/components/Forum.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { useWorkoutEdit } from '../hooks/useWorkoutEdit';\nimport './Forum.css';\n\nconst Forum = () => {\n  const { currentUser, isMember, isExec, isCoach, getUserRole } = useAuth();\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState('workouts');\n  const [workoutPosts, setWorkoutPosts] = useState([]);\n  const [eventPosts, setEventPosts] = useState([]);\n  const [newWorkout, setNewWorkout] = useState('');\n  const [newEvent, setNewEvent] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [showWorkoutForm, setShowWorkoutForm] = useState(false);\n  const [showEventForm, setShowEventForm] = useState(false);\n  const [workoutFilter, setWorkoutFilter] = useState('all');\n  const [timeFilter, setTimeFilter] = useState('upcoming'); // 'upcoming' | 'past'\n  const [pastPage, setPastPage] = useState(1);\n  const [pastPagination, setPastPagination] = useState({ currentPage: 1, totalPages: 1, totalPosts: 0, hasMore: false });\n  const [workoutForm, setWorkoutForm] = useState({\n    title: '',\n    type: 'spin',\n    date: '',\n    time: '',\n    content: '',\n    capacity: ''\n  });\n  const [eventForm, setEventForm] = useState({\n    title: '',\n    date: '',\n    content: ''\n  });\n  // Inline edit state for events (admin/exec)\n  const [editingEvent, setEditingEvent] = useState(null);\n  const [eventEditForm, setEventEditForm] = useState({\n    title: '',\n    date: '',\n    content: ''\n  });\n  const [savingEvent, setSavingEvent] = useState(false);\n  const [workoutSignups, setWorkoutSignups] = useState({});\n  const [workoutWaitlists, setWorkoutWaitlists] = useState({});\n  const [eventRsvps, setEventRsvps] = useState({});\n  const [showCancelModal, setShowCancelModal] = useState(false);\n  const [workoutToCancel, setWorkoutToCancel] = useState(null);\n  const [showPromotionMessage, setShowPromotionMessage] = useState(false);\n  const [promotedWorkout, setPromotedWorkout] = useState(null);\n  const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5001/api';\n  const [workoutsLoading, setWorkoutsLoading] = useState(false);\n  \n  // Reload when time filter or past page changes\n  useEffect(() => {\n    if (isMember(currentUser)) {\n      loadForumPosts();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [timeFilter, pastPage]);\n  \n  // Function to check if a workout type is allowed for the user's sport\n  const isWorkoutTypeAllowed = (workoutType) => {\n    console.log('🔍 isWorkoutTypeAllowed debug:', {\n      currentUser: currentUser,\n      sport: currentUser?.sport,\n      workoutType: workoutType\n    });\n    \n    if (!currentUser || !currentUser.sport) {\n      console.log('🔍 No sport preference, showing all workouts');\n      return true; // Show all if no sport preference\n    }\n    \n    const sport = currentUser.sport;\n    const isAllowed = (() => {\n      switch (sport) {\n        case 'run_only':\n          return workoutType === 'run';\n        case 'duathlon':\n          return ['run', 'outdoor-ride', 'brick'].includes(workoutType);\n        case 'triathlon':\n          return ['run', 'outdoor-ride', 'brick', 'swim', 'spin'].includes(workoutType);\n        default:\n          return true; // Show all for unknown sports\n      }\n    })();\n    \n    console.log('🔍 Sport filtering result:', { sport, workoutType, isAllowed });\n    return isAllowed;\n  };\n\n  // Function to get allowed workout types for the current user's sport\n  const getAllowedWorkoutTypes = () => {\n    if (!currentUser || !currentUser.sport) {\n      // Show all types if no sport preference\n      return [\n        { value: 'spin', label: 'Spin' },\n        { value: 'outdoor-ride', label: 'Outdoor Ride' },\n        { value: 'run', label: 'Run' },\n        { value: 'swim', label: 'Swim' },\n        { value: 'brick', label: 'Brick (Bike + Run)' },\n        { value: 'other', label: 'Other' }\n      ];\n    }\n    \n    const sport = currentUser.sport;\n    \n    switch (sport) {\n      case 'run_only':\n        return [\n          { value: 'run', label: 'Run' },\n          { value: 'other', label: 'Other' }\n        ];\n      case 'duathlon':\n        return [\n          { value: 'run', label: 'Run' },\n          { value: 'outdoor-ride', label: 'Outdoor Ride' },\n          { value: 'brick', label: 'Brick (Bike + Run)' },\n          { value: 'other', label: 'Other' }\n        ];\n      case 'triathlon':\n        return [\n          { value: 'run', label: 'Run' },\n          { value: 'outdoor-ride', label: 'Outdoor Ride' },\n          { value: 'brick', label: 'Brick (Bike + Run)' },\n          { value: 'swim', label: 'Swim' },\n          { value: 'spin', label: 'Spin' },\n          { value: 'other', label: 'Other' }\n        ];\n      default:\n        return [\n          { value: 'spin', label: 'Spin' },\n          { value: 'outdoor-ride', label: 'Outdoor Ride' },\n          { value: 'run', label: 'Run' },\n          { value: 'swim', label: 'Swim' },\n          { value: 'brick', label: 'Brick (Bike + Run)' },\n          { value: 'other', label: 'Other' }\n        ];\n    }\n  };\n  \n  const { \n    editingWorkout, \n    editForm, \n    saving, \n    startEdit, \n    cancelEdit, \n    updateField, \n    saveWorkout \n  } = useWorkoutEdit(API_BASE_URL);\n\n  useEffect(() => {\n    if (!currentUser) {\n      navigate('/login');\n      return;\n    }\n    \n    // If user is at least member, load posts. If pending, we'll render a gate message.\n    if (isMember(currentUser)) {\n      loadForumPosts();\n    } else {\n      // Ensure we don't stay stuck on loading for pending users\n      setLoading(false);\n    }\n  }, [currentUser, navigate, isMember]);\n\n  // Listen for profile updates to refresh profile pictures\n  useEffect(() => {\n    const handleProfileUpdate = (event) => {\n      console.log('🔄 Profile updated event received in Forum, refreshing posts...');\n      loadForumPosts();\n    };\n\n    window.addEventListener('profileUpdated', handleProfileUpdate);\n    \n    return () => {\n      window.removeEventListener('profileUpdated', handleProfileUpdate);\n    };\n  }, []);\n\n  // Check for tab query parameter and set active tab accordingly\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const tabParam = urlParams.get('tab');\n    \n    if (tabParam === 'events') {\n      setActiveTab('events');\n    } else if (tabParam === 'workouts') {\n      setActiveTab('workouts');\n    }\n    // If no tab param or invalid value, default to 'workouts' (existing behavior)\n  }, []);\n\n  const loadForumPosts = async () => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      // Load workout posts\n      const qp = new URLSearchParams();\n      qp.set('type', 'workout');\n      // Upcoming loads without pagination; past loads paginated 4/page\n      if (timeFilter === 'past') {\n        qp.set('time', 'past');\n        qp.set('page', String(pastPage));\n        qp.set('limit', '4');\n      } else {\n        qp.set('time', 'upcoming');\n      }\n      setWorkoutsLoading(true);\n      const workoutResponse = await fetch(`${API_BASE_URL}/forum/posts?${qp.toString()}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (workoutResponse.ok) {\n        const workoutData = await workoutResponse.json();\n        console.log('🔍 Workout data received:', workoutData);\n        \n        // Ensure we have valid posts data\n        const posts = workoutData.posts || workoutData || [];\n        console.log('🔍 Posts to set:', posts);\n        \n        // Filter out any invalid posts\n        const validPosts = posts.filter(post => post && post.id && typeof post === 'object');\n        console.log('🔍 Valid posts:', validPosts);\n        \n        \n        setWorkoutPosts(validPosts);\n        if (timeFilter === 'past' && workoutData.pagination) {\n          setPastPagination(workoutData.pagination);\n        }\n        \n        // Do not load per-workout signups/waitlists here; fetch on demand in detail view\n      }\n\n      // Load event posts only when Events tab is active to speed up initial load\n      if (activeTab === 'events') {\n        const eventResponse = await fetch(`${API_BASE_URL}/forum/posts?type=event`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (eventResponse.ok) {\n          const eventData = await eventResponse.json();\n          console.log('🔍 Event data received:', eventData);\n          \n          // Ensure we have valid posts data\n          const posts = eventData.posts || eventData || [];\n          console.log('🔍 Event posts to set:', posts);\n          \n          // Filter out any invalid posts\n          const validPosts = posts.filter(post => post && post.id && typeof post === 'object');\n          console.log('🔍 Valid event posts:', validPosts);\n          \n          setEventPosts(validPosts);\n          \n          // Load RSVP data for all events\n          await loadEventRsvps(validPosts);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading forum posts:', error);\n    } finally {\n      setLoading(false);\n      setWorkoutsLoading(false);\n    }\n  };\n\n  // When switching to Events tab, fetch events on demand\n  useEffect(() => {\n    if (activeTab === 'events' && isMember(currentUser)) {\n      loadForumPosts();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeTab]);\n\n  const loadWorkoutSignups = async (workouts) => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) return;\n\n      const signupsData = {};\n      \n      for (const workout of workouts) {\n        const signupsResponse = await fetch(`${API_BASE_URL}/forum/workouts/${workout.id}/signups`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (signupsResponse.ok) {\n          const data = await signupsResponse.json();\n          signupsData[workout.id] = data.signups || [];\n          console.log(`🔍 Workout ${workout.id} signups:`, data.signups || []);\n        }\n      }\n      \n      setWorkoutSignups(signupsData);\n      console.log('📊 All workout signups loaded:', signupsData);\n      console.log('🔍 Current workoutSignups state structure:', Object.keys(signupsData).map(key => ({\n        workoutId: key,\n        signupCount: signupsData[key]?.length || 0,\n        signups: signupsData[key] || []\n      })));\n    } catch (error) {\n      console.error('Error loading workout signups:', error);\n    }\n  };\n\n  const loadWorkoutWaitlists = async (workouts) => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) return;\n\n      const waitlistData = {};\n      \n      for (const workout of workouts) {\n        const waitlistResponse = await fetch(`${API_BASE_URL}/forum/workouts/${workout.id}/waitlist`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (waitlistResponse.ok) {\n          const data = await waitlistResponse.json();\n          waitlistData[workout.id] = data.waitlist || [];\n        }\n      }\n      \n      setWorkoutWaitlists(waitlistData);\n    } catch (error) {\n      console.error('Error loading workout waitlists:', error);\n    }\n  };\n\n  const loadEventRsvps = async (events) => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) return;\n\n      const rsvpsData = {};\n      \n      for (const event of events) {\n        const rsvpsResponse = await fetch(`${API_BASE_URL}/forum/events/${event.id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (rsvpsResponse.ok) {\n          const data = await rsvpsResponse.json();\n          rsvpsData[event.id] = data.rsvps || [];\n          console.log(`🔍 Event ${event.id} RSVPs:`, data.rsvps || []);\n        }\n      }\n      \n      setEventRsvps(rsvpsData);\n      console.log('📊 All event RSVPs loaded:', rsvpsData);\n    } catch (error) {\n      console.error('Error loading event RSVPs:', error);\n    }\n  };\n\n  // Event edit helpers\n  const startEventEdit = (eventPost) => {\n    setEditingEvent(eventPost.id);\n    setEventEditForm({\n      title: eventPost.title || '',\n      date: eventPost.event_date ? String(eventPost.event_date).split('T')[0] : '',\n      content: eventPost.content || ''\n    });\n  };\n\n  const cancelEventEdit = () => {\n    setEditingEvent(null);\n    setEventEditForm({ title: '', date: '', content: '' });\n  };\n\n  const updateEventField = (field, value) => {\n    setEventEditForm(prev => ({ ...prev, [field]: value }));\n  };\n\n  const saveEvent = async (eventId) => {\n    try {\n      setSavingEvent(true);\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) throw new Error('No authentication token found');\n\n      const body = {\n        title: eventEditForm.title,\n        eventDate: eventEditForm.date,\n        content: eventEditForm.content\n      };\n\n      const response = await fetch(`${API_BASE_URL}/forum/posts/${eventId}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(body)\n      });\n\n      if (!response.ok) {\n        const err = await response.json().catch(() => ({}));\n        throw new Error(err.error || 'Failed to update event');\n      }\n\n      setSavingEvent(false);\n      setEditingEvent(null);\n      await loadForumPosts();\n    } catch (error) {\n      console.error('Error updating event:', error);\n      setSavingEvent(false);\n      alert(error.message || 'Error updating event');\n    }\n  };\n\n  const handleWorkoutSignUp = async (workoutId) => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      // Check if user is already signed up\n      const isCurrentlySignedUp = isUserSignedUp(workoutId);\n      \n      if (!isCurrentlySignedUp) {\n        // Check capacity limit before allowing sign-up\n        const workout = workoutPosts.find(w => w.id === workoutId);\n        if (workout && workout.capacity) {\n          const currentSignups = workoutSignups[workoutId]?.length || 0;\n          if (currentSignups >= workout.capacity) {\n            alert(`Sorry, this workout is full! Maximum capacity: ${workout.capacity} people.`);\n            return;\n          }\n        }\n      }\n\n      const response = await fetch(`${API_BASE_URL}/forum/workouts/${workoutId}/signup`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        \n        // Reload signup data from backend to ensure accuracy\n        await loadWorkoutSignups(workoutPosts);\n        \n        // Also reload waitlist data in case someone was promoted\n        await loadWorkoutWaitlists(workoutPosts);\n      } else {\n        const error = await response.json();\n        console.error('Error updating signup:', error.error);\n      }\n    } catch (error) {\n      console.error('Error updating signup:', error);\n    }\n  };\n\n  const isUserSignedUp = (workoutId) => {\n    if (!workoutId) return false;\n    const signups = workoutSignups[workoutId] || [];\n    return signups.some(signup => signup && signup.user_id === currentUser.id);\n  };\n\n  const isWorkoutFull = (workoutId) => {\n    if (!workoutId) return false;\n    const workout = workoutPosts.find(w => w && w.id === workoutId);\n    if (!workout || !workout.capacity) return false;\n    const currentSignups = workoutSignups[workoutId]?.length || 0;\n    return currentSignups >= workout.capacity;\n  };\n\n  const isWorkoutArchived = (post) => {\n    if (!post || !post.workout_date) return false;\n    try {\n      // Parse the workout date and get just the date part (YYYY-MM-DD)\n      const workoutDate = new Date(post.workout_date);\n      if (isNaN(workoutDate.getTime())) return false;\n      \n      // Get today's date in the same timezone as the workout date\n      const today = new Date();\n      \n      // Compare dates by converting both to YYYY-MM-DD format\n      const workoutDateStr = workoutDate.toISOString().split('T')[0];\n      const todayStr = today.toISOString().split('T')[0];\n      \n      return workoutDateStr < todayStr;\n    } catch (_) {\n      return false;\n    }\n  };\n\n  const isUserOnWaitlist = (workoutId) => {\n    if (!workoutId) return false;\n    return workoutWaitlists[workoutId]?.some(waitlist => waitlist && waitlist.user_id === currentUser.id) || false;\n  };\n\n  // Returns 1-based position or null if not on waitlist\n  const getWaitlistPosition = (workoutId) => {\n    if (!workoutId) return null;\n    const list = workoutWaitlists[workoutId] || [];\n    const idx = list.findIndex(w => w && w.user_id === currentUser.id);\n    return idx === -1 ? null : idx + 1;\n  };\n\n  const formatOrdinal = (n) => {\n    if (n == null) return '';\n    const s = [\"th\",\"st\",\"nd\",\"rd\"], v = n % 100;\n    return n + (s[(v-20)%10] || s[v] || s[0]);\n  };\n\n  // Event RSVP functions\n  const handleEventRsvp = async (eventId, status) => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      // Call backend API to save RSVP\n      const response = await fetch(`${API_BASE_URL}/forum/events/${eventId}/rsvp`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ status })\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        \n        // Update local state based on backend response\n        const currentRsvps = eventRsvps[eventId] || [];\n        \n        if (result.status === null) {\n          // RSVP was removed\n          const filteredRsvps = currentRsvps.filter(r => r.user_id !== currentUser.id);\n          setEventRsvps(prev => ({\n            ...prev,\n            [eventId]: filteredRsvps\n          }));\n        } else {\n          // RSVP was added/updated\n          const filteredRsvps = currentRsvps.filter(r => r.user_id !== currentUser.id);\n          const newRsvp = {\n            id: Date.now(),\n            user_id: currentUser.id,\n            user_name: currentUser.name,\n            status: result.status,\n            signed_up_at: new Date().toISOString().split('T')[0]\n          };\n          setEventRsvps(prev => ({\n            ...prev,\n            [eventId]: [...filteredRsvps, newRsvp]\n          }));\n        }\n        \n        console.log('Event RSVP updated:', result);\n      } else {\n        const error = await response.json();\n        console.error('Error updating RSVP:', error.error);\n        alert(error.error || 'Error updating RSVP');\n      }\n    } catch (error) {\n      console.error('Error updating event RSVP:', error);\n      alert('Error updating RSVP');\n    }\n  };\n\n  const getUserRsvpStatus = (eventId) => {\n    if (!eventId) return null;\n    const rsvps = eventRsvps[eventId] || [];\n    const userRsvp = rsvps.find(rsvp => rsvp.user_id === currentUser.id);\n    return userRsvp ? userRsvp.status : null;\n  };\n\n  const handleWaitlistJoin = async (workoutId) => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/forum/workouts/${workoutId}/waitlist`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        // Refresh waitlist data\n        await loadWorkoutWaitlists(workoutPosts);\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Failed to join waitlist');\n      }\n    } catch (error) {\n      console.error('Error joining waitlist:', error);\n      alert('Failed to join waitlist');\n    }\n  };\n\n  const handleWaitlistLeave = async (workoutId) => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/forum/workouts/${workoutId}/waitlist`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        // Refresh waitlist data\n        await loadWorkoutWaitlists(workoutPosts);\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Failed to leave waitlist');\n      }\n    } catch (error) {\n      console.error('Error leaving waitlist:', error);\n      alert('Failed to leave waitlist');\n    }\n  };\n\n  const handleCancelClick = (workoutId) => {\n    setWorkoutToCancel(workoutId);\n    setShowCancelModal(true);\n  };\n\n  const handleCancelConfirm = async () => {\n    if (!workoutToCancel) return;\n    \n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/forum/workouts/${workoutToCancel}/signup`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        // Refresh both signup and waitlist data since someone might have been promoted\n        await loadWorkoutSignups(workoutPosts);\n        await loadWorkoutWaitlists(workoutPosts);\n        setShowCancelModal(false);\n        setWorkoutToCancel(null);\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Failed to cancel signup');\n      }\n    } catch (error) {\n      console.error('Error canceling signup:', error);\n      alert('Failed to cancel signup');\n    }\n  };\n\n  const handleCancelCancel = () => {\n    setShowCancelModal(false);\n    setWorkoutToCancel(null);\n  };\n\n  // Check if user was promoted from waitlist after data refresh\n  const checkForWaitlistPromotion = (workoutId) => {\n            const wasOnWaitlist = workoutWaitlists[workoutId]?.some(w => w.user_id === currentUser.id);\n        const isNowSignedUp = workoutSignups[workoutId]?.some(s => s.user_id === currentUser.id);\n    \n    if (wasOnWaitlist && isNowSignedUp) {\n      // User was promoted from waitlist!\n      const workout = workoutPosts.find(w => w.id === workoutId);\n      setPromotedWorkout(workout);\n      setShowPromotionMessage(true);\n      \n      // Auto-hide after 10 seconds\n      setTimeout(() => {\n        setShowPromotionMessage(false);\n        setPromotedWorkout(null);\n      }, 10000);\n    }\n  };\n\n  const handleSubmitWorkout = async (e) => {\n    e.preventDefault();\n    if (!workoutForm.title.trim() || !workoutForm.date || !workoutForm.time || !workoutForm.content.trim()) return;\n\n    // Check if the selected date is in the future\n    const selectedDate = new Date(workoutForm.date);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Reset time to start of day for accurate comparison\n    \n    if (selectedDate <= today) {\n      alert('Please select a future date for your workout.');\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/forum/posts`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          title: workoutForm.title.trim(),\n          workoutType: workoutForm.type,\n          workoutDate: workoutForm.date,\n          workoutTime: workoutForm.time,\n          content: workoutForm.content.trim(),\n          capacity: workoutForm.capacity ? parseInt(workoutForm.capacity) : null,\n          type: 'workout'\n        })\n      });\n\n      if (response.ok) {\n        const newPostData = await response.json();\n        console.log('🔍 New workout data received:', newPostData);\n        \n        // Check if the response has the expected structure\n        if (newPostData.post) {\n          setWorkoutPosts([newPostData.post, ...workoutPosts]);\n          console.log('✅ Workout added to state');\n        } else if (newPostData.id) {\n          // If the response is the post directly\n          setWorkoutPosts([newPostData, ...workoutPosts]);\n          console.log('✅ Workout added to state (direct response)');\n        } else {\n          console.error('❌ Unexpected response structure:', newPostData);\n          // Fallback: reload all posts\n          console.log('🔄 Reloading all posts as fallback...');\n          loadForumPosts();\n        }\n        \n        setWorkoutForm({\n          title: '',\n          type: 'spin',\n          date: '',\n          time: '',\n          content: '',\n          capacity: ''\n        });\n        setShowWorkoutForm(false);\n      } else {\n        console.error('Failed to create workout post');\n      }\n    } catch (error) {\n        console.error('Error creating workout post:', error);\n    }\n  };\n\n  const handleSubmitEvent = async (e) => {\n    e.preventDefault();\n    if (!eventForm.title.trim() || !eventForm.date || !eventForm.content.trim()) return;\n\n    // Check if the selected date is in the future\n    const selectedDate = new Date(eventForm.date);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Reset time to start of day for accurate comparison\n    \n    if (selectedDate <= today) {\n      alert('Please select a future date for your event.');\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/forum/posts`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          title: eventForm.title.trim(),\n          eventDate: eventForm.date,\n          content: eventForm.content.trim(),\n          type: 'event'\n        })\n      });\n\n      if (response.ok) {\n        const newPostData = await response.json();\n        setEventPosts([newPostData.post, ...eventPosts]);\n        setEventForm({\n          title: '',\n          date: '',\n          content: ''\n        });\n        setShowEventForm(false);\n      } else {\n        console.error('Failed to create event post');\n      }\n    } catch (error) {\n      console.error('Error creating event post:', error);\n    }\n  };\n\n  const handleLike = async (postId) => {\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/forum/posts/${postId}/like`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        // Reload posts to get updated like count\n        loadForumPosts();\n      } else {\n        console.error('Failed to like post');\n      }\n    } catch (error) {\n      console.error('Error liking post:', error);\n    }\n  };\n\n  const handleDeleteWorkout = async (postId) => {\n    if (!window.confirm('Are you sure you want to delete this workout post?')) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/forum/posts/${postId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        loadForumPosts();\n      } else {\n        console.error('Failed to delete workout post');\n      }\n    } catch (error) {\n      console.error('Error deleting workout post:', error);\n    }\n  };\n\n  const handleDeleteEvent = async (postId) => {\n    if (!window.confirm('Are you sure you want to delete this event post?')) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        console.error('No authentication token found');\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/forum/posts/${postId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        loadForumPosts();\n      } else {\n        console.error('Failed to delete event post');\n      }\n    } catch (error) {\n      console.error('Error deleting event post:', error);\n    }\n  };\n\n\n\n  // Date helpers (treat YYYY-MM-DD as UTC to avoid TZ shifting)\n  const parseDateOnlyUTC = (dateStr) => {\n    if (!dateStr) return null;\n    const base = (typeof dateStr === 'string') ? dateStr.split('T')[0] : dateStr;\n    const parts = base.split('-');\n    if (parts.length !== 3) return new Date(dateStr);\n    const [y, m, d] = parts.map(Number);\n    return new Date(Date.UTC(y, m - 1, d));\n  };\n\n  const formatDateOnlyUTC = (dateStr) => {\n    const d = parseDateOnlyUTC(dateStr);\n    if (!d || isNaN(d.getTime())) return '';\n    return d.toLocaleDateString(undefined, { timeZone: 'UTC' });\n  };\n\n  // Helpers for date filtering\n  const isPast = (dateStr) => {\n    try {\n      if (!dateStr) return false;\n      const d = parseDateOnlyUTC(dateStr);\n      if (!d || isNaN(d.getTime())) return false;\n      const today = new Date();\n      today.setUTCHours(0, 0, 0, 0);\n      return d < today;\n    } catch (_) {\n      return false;\n    }\n  };\n\n  // Filter workouts based on selected filters (time + type + sport)\n  const getFilteredWorkouts = () => {\n    // First filter by sport preference\n    const bySport = workoutPosts.filter(post => {\n      return isWorkoutTypeAllowed(post.workout_type);\n    });\n\n    // Then filter by time\n    const byTime = bySport.filter(post => {\n      const past = isPast(post.workout_date);\n      return timeFilter === 'past' ? past : !past;\n    });\n\n    // Sort by actual workout_date, not created_at\n    byTime.sort((a, b) => {\n      const da = a && a.workout_date ? parseDateOnlyUTC(a.workout_date) : new Date(0);\n      const db = b && b.workout_date ? parseDateOnlyUTC(b.workout_date) : new Date(0);\n      return timeFilter === 'past' ? db - da : da - db; // past: newest first, upcoming: soonest first\n    });\n\n    if (workoutFilter === 'all') return byTime;\n\n    return byTime.filter(post => {\n      switch (workoutFilter) {\n        case 'bike':\n          return post.workout_type === 'spin' || post.workout_type === 'outdoor-ride' || post.workout_type === 'brick';\n        case 'swim':\n          return post.workout_type === 'swim';\n        case 'run':\n          return post.workout_type === 'run';\n        default:\n          return true;\n      }\n    });\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading...</div>;\n  }\n\n  if (!currentUser) {\n    return null;\n  }\n\n  // Gate for pending users: show message instead of forum content\n  if (!isMember(currentUser) && !isCoach(currentUser) && !isExec(currentUser)) {\n    return (\n      <div className=\"forum-container\">\n        <div className=\"container\">\n          <h1 className=\"section-title\">Team Forum</h1>\n          <div className=\"notice-card\" style={{\n            background: '#fff8e1',\n            border: '1px solid #facc15',\n            color: '#92400e',\n            padding: '16px',\n            borderRadius: '8px',\n            lineHeight: 1.6\n          }}>\n            <p style={{margin: 0}}>\n              You don't have access to the forum yet. Please email <a href=\"mailto:info@uoft-tri.club\">info@uoft-tri.club</a> your membership receipt and we will confirm your registration! You will have to log out and then log back in to see this page.\n            </p>\n            <p style={{margin: '12px 0 0 0', fontSize: '14px', opacity: 0.9}}>\n              <strong>Note:</strong> If you were a member on our old website, you'll be automatically approved as a member once you sign up. You will get an email once you get access!\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"forum-container\">\n      <div className=\"container\">\n        <h1 className=\"section-title\">Team Forum</h1>\n        <p className=\"section-subtitle\">Connect with your teammates and discuss training, races, and more!</p>\n        \n        {/* Forum Tabs */}\n        <div className=\"forum-tabs\">\n          <button \n            className={`tab-button ${activeTab === 'workouts' ? 'active' : ''}`}\n            onClick={() => setActiveTab('workouts')}\n          >\n            🏃‍♂️ Workouts\n          </button>\n          <button \n            className={`tab-button ${activeTab === 'events' ? 'active' : ''}`}\n            onClick={() => setActiveTab('events')}\n          >\n            🎉 Events\n          </button>\n        </div>\n\n        {/* Workouts Section */}\n        {activeTab === 'workouts' && (\n          <div className=\"workouts-section\">\n            <div className=\"section-header\">\n              <h2>Workout Posts</h2>\n              {(isExec(currentUser) || isCoach(currentUser)) && (\n                <button \n                  className=\"new-post-btn\"\n                  onClick={() => setShowWorkoutForm(true)}\n                >\n                  + New Workout\n                </button>\n              )}\n            </div>\n\n            {/* Time Filters (row 1) */}\n            <div className=\"workout-filters\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n              <div style={{ display: 'flex', gap: 8 }}>\n                <button \n                  className={`filter-btn ${timeFilter === 'upcoming' ? 'active' : ''}`}\n                  onClick={() => { setTimeFilter('upcoming'); setPastPage(1); }}\n                >\n                  ⏳ Upcoming\n                </button>\n                <button \n                  className={`filter-btn ${timeFilter === 'past' ? 'active' : ''}`}\n                  onClick={() => { setTimeFilter('past'); setPastPage(1); }}\n                >\n                  🗂 Past\n                </button>\n              </div>\n\n              {timeFilter === 'past' && (\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                  <span style={{ fontSize: 13, color: '#6b7280' }}>Page {pastPagination.currentPage} of {pastPagination.totalPages}</span>\n                  <button \n                    className=\"filter-btn\"\n                    onClick={() => setPastPage(p => Math.max(1, p - 1))}\n                    disabled={pastPagination.currentPage <= 1}\n                  >\n                    Previous\n                  </button>\n                  <button \n                    className=\"filter-btn\"\n                    onClick={() => setPastPage(p => Math.min(pastPagination.totalPages, p + 1))}\n                    disabled={pastPagination.currentPage >= pastPagination.totalPages}\n                  >\n                    Next\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* Type Filters (row 2) */}\n            <div className=\"workout-filters\">\n              <button \n                className={`filter-btn ${workoutFilter === 'all' ? 'active' : ''}`}\n                onClick={() => setWorkoutFilter('all')}\n              >\n                🏁 All Types\n              </button>\n              <button \n                className={`filter-btn ${workoutFilter === 'bike' ? 'active' : ''}`}\n                onClick={() => setWorkoutFilter('bike')}\n              >\n                🚴‍♂️ Bike (Indoor/Outdoor/Brick)\n              </button>\n              <button \n                className={`filter-btn ${workoutFilter === 'swim' ? 'active' : ''}`}\n                onClick={() => setWorkoutFilter('swim')}\n              >\n                🏊‍♂️ Swim\n              </button>\n              <button \n                className={`filter-btn ${workoutFilter === 'run' ? 'active' : ''}`}\n                onClick={() => setWorkoutFilter('run')}\n              >\n                🏃‍♀️ Run\n              </button>\n            </div>\n\n            {getFilteredWorkouts().length === 0 ? (\n              <p className=\"no-posts\">\n                {workoutsLoading \n                  ? 'Loading workouts...'\n                  : (workoutPosts.length === 0 \n                      ? 'No workout posts yet.' \n                      : `No ${workoutFilter === 'all' ? '' : workoutFilter} workouts found.`)}\n              </p>\n            ) : (\n              <div className=\"posts-list\">\n                {getFilteredWorkouts().filter(post => post && post.id).map(post => (\n                  <div key={post.id} className=\"post-card workout-post\" onClick={() => window.location.href = `/workout/${post.id}`}>\n                    <div className=\"post-header\">\n                      {post.title ? (\n                        <div className=\"workout-title\">\n                          <h2>\n                            {post.title}\n                          </h2>\n                        </div>\n                      ) : (\n                        <div className=\"workout-title\">\n                          <h2>Untitled Workout</h2>\n                        </div>\n                      )}\n                      \n                      {/* Edit and Delete buttons for workout author, executives, and administrators */}\n                      {(currentUser.id === post.user_id || currentUser.role === 'exec' || currentUser.role === 'administrator') && (\n                        <div className=\"workout-actions-admin\">\n                          <button \n                            className=\"edit-btn\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              startEdit(post);\n                            }}\n                            disabled={editingWorkout === post.id}\n                          >\n                            ✏️ Edit\n                          </button>\n                          <button \n                            className=\"delete-btn\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleDeleteWorkout(post.id);\n                            }}\n                            disabled={editingWorkout === post.id}\n                          >\n                            🗑️ Delete\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"workout-author\">\n                      <div className=\"author-info\">\n                        {(() => {\n                          const { normalizeProfileImageUrl } = require('../utils/imageUtils');\n                          const url = normalizeProfileImageUrl(post.authorProfilePictureUrl);\n                          return url ? (\n                            <img \n                              src={url}\n                              alt=\"Profile\" \n                              className=\"author-avatar\"\n                              loading=\"lazy\"\n                              decoding=\"async\"\n                              fetchpriority=\"low\"\n                              onError={(e) => {\n                                e.target.src = '/images/default_profile.png';\n                              }}\n                            />\n                          ) : (\n                            <img \n                              src=\"/images/default_profile.png\" \n                              alt=\"Profile\" \n                              className=\"author-avatar\"\n                            />\n                          );\n                        })()}\n                        {/* single image handled above; no extra fallback */}\n                        <span className=\"author-name\">Posted by {post.author_name}</span>\n                      </div>\n                    </div>\n                    \n                    {editingWorkout === post.id ? (\n                      <div className=\"workout-edit-form\">\n                        <div className=\"form-group\">\n                          <label htmlFor={`edit-title-${post.id}`}>Title:</label>\n                          <input\n                            id={`edit-title-${post.id}`}\n                            type=\"text\"\n                            value={editForm.title}\n                            onChange={(e) => updateField('title', e.target.value)}\n                            className=\"form-input\"\n                            placeholder=\"Enter workout title...\"\n                          />\n                        </div>\n                        \n                        <div className=\"form-row\">\n                          <div className=\"form-group\">\n                            <label htmlFor={`edit-type-${post.id}`}>Workout Type:</label>\n                            <input\n                              id={`edit-type-${post.id}`}\n                              type=\"text\"\n                                                          value={editForm.workoutType}\n                            onChange={(e) => updateField('workoutType', e.target.value)}\n                              className=\"form-input\"\n                              placeholder=\"Enter workout type...\"\n                            />\n                          </div>\n                          \n                          <div className=\"form-group\">\n                            <label htmlFor={`edit-capacity-${post.id}`}>Capacity:</label>\n                            <input\n                              id={`edit-capacity-${post.id}`}\n                              type=\"number\"\n                              min=\"1\"\n                                                          value={editForm.capacity}\n                            onChange={(e) => updateField('capacity', e.target.value)}\n                              className=\"form-input\"\n                              placeholder=\"Enter capacity...\"\n                            />\n                          </div>\n                        </div>\n                        \n                        <div className=\"form-row\">\n                          <div className=\"form-group\">\n                            <label htmlFor={`edit-date-${post.id}`}>Date:</label>\n                            <input\n                              id={`edit-date-${post.id}`}\n                              type=\"date\"\n                                                          value={editForm.workoutDate}\n                            onChange={(e) => updateField('workoutDate', e.target.value)}\n                              className=\"form-input\"\n                            />\n                          </div>\n                          \n                          <div className=\"form-group\">\n                            <label htmlFor={`edit-time-${post.id}`}>Time:</label>\n                            <input\n                              id={`edit-time-${post.id}`}\n                              type=\"time\"\n                                                          value={editForm.workoutTime}\n                            onChange={(e) => updateField('workoutTime', e.target.value)}\n                              className=\"form-input\"\n                            />\n                          </div>\n                        </div>\n                        \n                        <div className=\"form-group\">\n                          <label htmlFor={`edit-content-${post.id}`}>Description:</label>\n                          <textarea\n                            id={`edit-content-${post.id}`}\n                            value={editForm.content}\n                            onChange={(e) => updateField('content', e.target.value)}\n                            className=\"form-textarea\"\n                            rows=\"3\"\n                            placeholder=\"Enter workout description...\"\n                          />\n                        </div>\n                        \n                        <div className=\"edit-actions\">\n                          <button \n                            className=\"btn btn-primary\" \n                            onClick={() => saveWorkout(post.id, loadForumPosts)}\n                            disabled={saving}\n                          >\n                            {saving ? 'Saving...' : 'Save Changes'}\n                          </button>\n                          <button \n                            className=\"btn btn-secondary\" \n                            onClick={cancelEdit}\n                            disabled={saving}\n                          >\n                            Cancel\n                          </button>\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        {post.workout_type && (\n                          <div className=\"workout-meta\">\n                            <span className=\"workout-type-badge\">{post.workout_type}</span>\n                            {post.workout_date && (\n                              <span className=\"workout-date\">\n                                📅 {formatDateOnlyUTC(post.workout_date)}\n                                {post.workout_time && (\n                                  <span className=\"workout-time\"> • 🕐 {post.workout_time}</span>\n                                )}\n                              </span>\n                            )}\n                          </div>\n                        )}\n\n                        {/* Content omitted in list view for performance; open detail to view full description */}\n                      </>\n                    )}\n\n                    {/* Sign-up button positioned at bottom right */}\n                    <div className=\"workout-signup-section\">\n                      <div className=\"button-group\">\n                        <button \n                          className=\"signup-btn\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            window.location.href = `/workout/${post.id}`;\n                          }}\n                        >\n                          View Details\n                        </button>\n                      </div>\n                      <div className=\"signup-count\">\n                        <div className=\"signup-main\">\n                          {post.capacity \n                            ? `${(post.signup_count ?? 0)}/${post.capacity} signed up`\n                            : `${(post.signup_count ?? 0)} signed up`\n                          }\n                        </div>\n                        {post.capacity && (\n                          <div className=\"signup-details\">\n                            <span className={`capacity-status ${(post.signup_count ?? 0) >= post.capacity ? 'full' : 'available'}`}>\n                              {(post.signup_count ?? 0) >= post.capacity ? 'Full' : 'Available'}\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Events Section */}\n        {activeTab === 'events' && (\n          <div className=\"events-section\">\n            <div className=\"section-header\">\n              <h2>Event Posts</h2>\n              {isExec(currentUser) && (\n                <button \n                  className=\"new-post-btn\"\n                  onClick={() => setShowEventForm(true)}\n                >\n                  + New Event\n                </button>\n              )}\n            </div>\n\n            {eventPosts.length === 0 ? (\n              <p className=\"no-posts\">No event posts yet.</p>\n            ) : (\n              <div className=\"posts-list\">\n                {eventPosts.map(post => (\n                  <div key={post.id} className=\"post-card event-post\" onClick={() => window.location.href = `/event/${post.id}`}>\n                    <div className=\"post-header\">\n                      {editingEvent === post.id ? (\n                        <div className=\"event-edit-form\">\n                          <div className=\"form-group\">\n                            <label htmlFor={`edit-event-title-${post.id}`}>Title:</label>\n                            <input\n                              id={`edit-event-title-${post.id}`}\n                              type=\"text\"\n                              value={eventEditForm.title}\n                              onChange={(e) => updateEventField('title', e.target.value)}\n                              className=\"form-input\"\n                              placeholder=\"Enter event title...\"\n                            />\n                          </div>\n\n                          <div className=\"form-group\">\n                            <label htmlFor={`edit-event-date-${post.id}`}>Date:</label>\n                            <input\n                              id={`edit-event-date-${post.id}`}\n                              type=\"date\"\n                              value={eventEditForm.date}\n                              onChange={(e) => updateEventField('date', e.target.value)}\n                              className=\"form-input\"\n                            />\n                          </div>\n\n                          <div className=\"form-group\">\n                            <label htmlFor={`edit-event-content-${post.id}`}>Details:</label>\n                            <textarea\n                              id={`edit-event-content-${post.id}`}\n                              value={eventEditForm.content}\n                              onChange={(e) => updateEventField('content', e.target.value)}\n                              className=\"form-textarea\"\n                              rows=\"3\"\n                              placeholder=\"Enter event details...\"\n                            />\n                          </div>\n\n                          <div className=\"edit-actions\">\n                            <button \n                              className=\"btn btn-primary\" \n                              onClick={(e) => { e.stopPropagation(); saveEvent(post.id); }}\n                              disabled={savingEvent}\n                            >\n                              {savingEvent ? 'Saving...' : 'Save Changes'}\n                            </button>\n                            <button \n                              className=\"btn btn-secondary\" \n                              onClick={(e) => { e.stopPropagation(); cancelEventEdit(); }}\n                              disabled={savingEvent}\n                            >\n                              Cancel\n                            </button>\n                          </div>\n                        </div>\n                      ) : (\n                        <>\n                          {post.title && (\n                            <div className=\"event-title\">\n                              <h3>\n                                {post.title}\n                              </h3>\n                            </div>\n                          )}\n\n                          {/* Edit/Delete for author, exec, admin */}\n                          {(currentUser.id === post.user_id || currentUser.role === 'exec' || currentUser.role === 'administrator') && (\n                            <div className=\"workout-actions-admin\">\n                              <button \n                                className=\"edit-btn\"\n                                onClick={(e) => { e.stopPropagation(); startEventEdit(post); }}\n                                disabled={editingEvent === post.id}\n                              >\n                                ✏️ Edit\n                              </button>\n                              <button \n                                className=\"delete-btn\"\n                                onClick={(e) => { e.stopPropagation(); handleDeleteEvent(post.id); }}\n                                disabled={editingEvent === post.id}\n                              >\n                                🗑️ Delete\n                              </button>\n                            </div>\n                          )}\n                        </>\n                      )}\n                    </div>\n                    \n                    <div className=\"event-author\">\n                      <div className=\"author-info\">\n                        {(() => {\n                          const { normalizeProfileImageUrl } = require('../utils/imageUtils');\n                          const url = normalizeProfileImageUrl(post.authorProfilePictureUrl);\n                          return url ? (\n                            <img \n                              src={url}\n                              alt=\"Profile\" \n                              className=\"author-avatar\"\n                              loading=\"lazy\"\n                              decoding=\"async\"\n                              fetchpriority=\"low\"\n                              onError={(e) => {\n                                e.target.src = '/images/default_profile.png';\n                              }}\n                            />\n                          ) : (\n                            <img \n                              src=\"/images/default_profile.png\" \n                              alt=\"Profile\" \n                              className=\"author-avatar\"\n                            />\n                          );\n                        })()}\n                        <span className=\"author-name\">Posted by {post.author_name}</span>\n                      </div>\n                    </div>\n                    \n                    {post.event_date && (\n                      <div className=\"event-meta\">\n                        <span className=\"event-date\">\n                          {(() => {\n                            try {\n                              const base = String(post.event_date).split('T')[0];\n                              const [y, m, d] = base.split('-').map(Number);\n                              const dt = new Date(Date.UTC(y, m - 1, d));\n                              return `📅 ${dt.toLocaleDateString(undefined, { timeZone: 'UTC' })}`;\n                            } catch {\n                              return `📅 ${post.event_date}`;\n                            }\n                          })()}\n                        </span>\n                      </div>\n                    )}\n                    \n                    <div className=\"post-footer\">\n                      <div className=\"rsvp-buttons\">\n                        <button \n                          className={`rsvp-btn going ${getUserRsvpStatus(post.id) === 'going' ? 'active' : ''}`}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleEventRsvp(post.id, 'going');\n                          }}\n                        >\n                          {getUserRsvpStatus(post.id) === 'going' ? '✓ Going' : 'Going'}\n                        </button>\n                        <button \n                          className={`rsvp-btn maybe ${getUserRsvpStatus(post.id) === 'maybe' ? 'active' : ''}`}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleEventRsvp(post.id, 'maybe');\n                          }}\n                        >\n                          {getUserRsvpStatus(post.id) === 'maybe' ? '✓ Maybe' : 'Maybe'}\n                        </button>\n                        <button \n                          className={`rsvp-btn not-going ${getUserRsvpStatus(post.id) === 'not_going' ? 'active' : ''}`}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleEventRsvp(post.id, 'not_going');\n                          }}\n                        >\n                          {getUserRsvpStatus(post.id) === 'not_going' ? '✓ Not Going' : 'Not Going'}\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Waitlist Promotion Success Message */}\n        {showPromotionMessage && promotedWorkout && (\n          <div className=\"promotion-message\">\n            <div className=\"promotion-content\">\n              <h3>🎉 Congratulations!</h3>\n              <p>You've been promoted from the waitlist for <strong>{promotedWorkout.title}</strong>!</p>\n              <p>Check your email for details. You're now officially signed up for this workout.</p>\n              <button \n                className=\"promotion-close-btn\"\n                onClick={() => setShowPromotionMessage(false)}\n              >\n                ✕\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Cancel Confirmation Modal */}\n        {showCancelModal && (\n          <div className=\"modal-overlay\">\n            <div className=\"modal cancel-modal\">\n              <h2>Cancel Workout Signup</h2>\n              <div className=\"cancel-warning\">\n                <p>⚠️ <strong>Important:</strong> If you cancel less than 12 hours in advance, it will count as an absence.</p>\n                <p>Your absences are recorded and once you have three, you will be suspended from signing up for a week.</p>\n                <p>This is to keep it fair for all members!</p>\n              </div>\n              <div className=\"modal-actions\">\n                <button className=\"btn-secondary\" onClick={handleCancelCancel}>\n                  Keep Booking\n                </button>\n                <button className=\"btn-danger\" onClick={handleCancelConfirm}>\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Workout Creation Modal */}\n        {showWorkoutForm && (\n          <div className=\"modal-overlay\">\n            <div className=\"modal\">\n              <h2>Create New Workout Post</h2>\n              <form onSubmit={handleSubmitWorkout}>\n                <div className=\"form-group\">\n                  <label>Workout Title:</label>\n                  <input\n                    type=\"text\"\n                    value={workoutForm.title}\n                    onChange={(e) => setWorkoutForm({...workoutForm, title: e.target.value})}\n                    placeholder=\"e.g., Tuesday Morning Swim, Weekend Long Run\"\n                    maxLength=\"100\"\n                    required\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label>Workout Type:</label>\n                  <select\n                    value={workoutForm.type}\n                    onChange={(e) => setWorkoutForm({...workoutForm, type: e.target.value})}\n                    required\n                  >\n                    {getAllowedWorkoutTypes().map(option => (\n                      <option key={option.value} value={option.value}>\n                        {option.label}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div className=\"form-group\">\n                  <label>Workout Date:</label>\n                  <input\n                    type=\"date\"\n                    value={workoutForm.date}\n                    onChange={(e) => setWorkoutForm({...workoutForm, date: e.target.value})}\n                    min={new Date().toISOString().split('T')[0]}\n                    required\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label>Workout Time:</label>\n                  <input\n                    type=\"time\"\n                    value={workoutForm.time}\n                    onChange={(e) => setWorkoutForm({...workoutForm, time: e.target.value})}\n                    required\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label>Additional Details:</label>\n                  <textarea\n                    value={workoutForm.content}\n                    onChange={(e) => setWorkoutForm({...workoutForm, content: e.target.value})}\n                    placeholder=\"Describe the workout, time, location, requirements, what to bring...\"\n                    rows=\"4\"\n                    maxLength=\"500\"\n                    required\n                  />\n                  <small className=\"char-count\">{workoutForm.content.length}/500</small>\n                </div>\n\n                <div className=\"form-group\">\n                  <label>Capacity (Optional):</label>\n                  <input\n                    type=\"number\"\n                    value={workoutForm.capacity}\n                    onChange={(e) => setWorkoutForm({...workoutForm, capacity: e.target.value})}\n                    placeholder=\"Leave empty for unlimited spots\"\n                    min=\"1\"\n                    max=\"100\"\n                  />\n                  <small>Maximum number of people who can sign up. Leave empty for unlimited spots.</small>\n                </div>\n\n                <div className=\"modal-actions\">\n                  <button type=\"submit\" className=\"btn btn-primary\">Post Workout</button>\n                  <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setShowWorkoutForm(false)}>Cancel</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {/* Event Creation Modal */}\n        {showEventForm && (\n          <div className=\"modal-overlay\">\n            <div className=\"modal\">\n              <h2>Create New Event Post</h2>\n              <form onSubmit={handleSubmitEvent}>\n                <div className=\"form-group\">\n                  <label>Event Title:</label>\n                  <input\n                    type=\"text\"\n                    value={eventForm.title}\n                    onChange={(e) => setEventForm({...eventForm, title: e.target.value})}\n                    placeholder=\"e.g., Club Social Night, Race Watch Party\"\n                    maxLength=\"100\"\n                    required\n                  />\n                </div>\n\n                                <div className=\"form-group\">\n                  <label>Event Date:</label>\n                  <input\n                    type=\"date\"\n                    value={eventForm.date}\n                    onChange={(e) => setEventForm({...eventForm, date: e.target.value})}\n                    min={new Date().toISOString().split('T')[0]}\n                    required\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label>Event Details:</label>\n                  <textarea\n                    value={eventForm.content}\n                    onChange={(e) => setEventForm({...eventForm, content: e.target.value})}\n                    placeholder=\"Describe the event, time, location, what to bring, RSVP details...\"\n                    rows=\"4\"\n                    maxLength=\"500\"\n                    required\n                  />\n                  <small className=\"char-count\">{eventForm.content.length}/500</small>\n                </div>\n\n                <div className=\"modal-actions\">\n                  <button type=\"submit\" className=\"btn btn-primary\">Post Event</button>\n                  <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setShowEventForm(false)}>Cancel</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Forum;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}