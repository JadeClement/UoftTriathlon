{"ast":null,"code":"import _objectSpread from\"/Users/jadeclement/Documents/Developer/uofttri/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useParams,Link}from'react-router-dom';import{useAuth}from'../context/AuthContext';import'./Profile.css';// Team member data - moved outside component to prevent recreation on every render\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const teamMembers={'swim-coach':{name:'Justin Konik',role:'Swim Coach',image:'/images/swimcoach.png',bio:\"Justin Konik is our dedicated swim coach with over 10 years of experience in competitive swimming and triathlon coaching. He specializes in stroke technique, endurance training, and helping athletes overcome their fear of open water swimming.\\n\\nJustin's coaching philosophy focuses on building confidence in the water while developing efficient swimming mechanics. He has coached athletes from complete beginners to elite competitors, and his personalized approach ensures each swimmer reaches their full potential.\\n\\nWhen not coaching, Justin competes in open water swimming events and enjoys helping new triathletes discover their love for the sport. He believes that swimming should be both challenging and enjoyable, and he's committed to making every training session productive and fun.\"},'co-president':{name:'Jade Clement',role:'Co-President',image:'/images/team-photo1.jpeg',bio:\"Jade joined the team when she started studying engineering at the University of Toronto in 2021. She raced her first mini triathlon at 8 years old and has been having fun racing ever since! Throughout high school she focused mainly on swimming and only stopped competitive swim team at 16. This summer she competed in her first Olympic distance triathlon at the TTF having only ever done sprints before that. Last year she participated in her most exciting race to date - the amateur World Triathlon Championships in Spain! Crossing her fingers that she\\u2019ll qualify again for next year! In 2025 she took the role of co-president alongside Marlene and hopes to keep growing the team, plan races together and continue having fun in this crazy sport.\"},'co-president-2':{name:'Marlene Garijo',role:'Co-President',image:'/images/team-photo2.jpeg',bio:\"Marlene Garijo serves as Co-President alongside Jade, bringing her unique perspective and energy to club leadership. With a background in competitive sports and event organization, Marlene excels at creating memorable experiences for club members.\\n\\nMarlene's strengths lie in strategic planning, member engagement, and ensuring the club operates smoothly behind the scenes. She works closely with the executive team to implement new initiatives and maintain the high standards that make our club special.\\n\\nHer passion for triathlon extends beyond personal achievement to helping others discover their potential in the sport. Marlene believes that every member has something valuable to contribute to the club, and she works to create opportunities for everyone to get involved.\"},'treasurer':{name:'Edward Ing',role:'Treasurer',image:'/images/exec_treasurer.jpg',bio:\"\\nEdward Ing is our newest member of the exec team and joins as your web master and substitute bike leader outdoors. He joined the club in January of 2015. The rationale was to become a good swimmer from near scratch and have a club to train for running races. That summer he raced a duathlon at Welland and thought it was bizarre that in this sport that finishing nowhere near the lead he could still earn a second place podium spot (45-49 age groupers).\\nBut what inspired him was that he thought he was running with Olympians because he saw himself racing competitors wearing Team Canada triathlon uniforms. He was mistaken. He found out they were not Olympians, but age-groupers, some like him in the 50s. But he was inspired to earn the privilege to wear those Team Canada trisuit uniforms thinking that might be an achievable goal. He had a bike accident that summer and had to leave the first triathlon till 2016.\\nHe finally did his first triathlon, a sprint in Woodstock in 2016. It was a preparation race for the goal of earning a ITU World Championship age-group qualification in the Ottawa National Championship race.\\nHis favourite achievement is the New York City Half Marathon 2016, just missing a money spot by one. His duathlon qualification at Esprit de Montreal 2019 for the 2020 ITU Multisport Championships in his mind is his to be executed multisport race.\\nAlso he says quite memorable was his Boston qualifying finish at the Toronto Waterfront marathon which he felt was a more important achievement than running Boston itself.\\n(Over the COVID hiatus he worked on his swim technique whenever there was a pool opening and thinks he is on the road to fast swims.)\\nHis message to young rookie tri-club athletes \\u2014 \\u201CYou are likely in the easiest age group to qualify for the World Age-Group Championships, train to qualify, Bragging right last a lifetime here.!\\u201D\"},'secretary':{name:'Lauren Williams',role:'Secretary',image:'/images/team-photo3.jpeg',bio:\"Lauren Williams is our club Secretary, responsible for maintaining clear communication and record-keeping within the club. With excellent organizational skills and attention to detail, Lauren ensures that important information reaches all members and that club activities are well-documented.\\n\\nLauren's role includes managing club communications, taking meeting minutes, maintaining membership records, and coordinating with other executive members to keep everyone informed. Her work behind the scenes is crucial to the smooth operation of the club.\\n\\nLauren is passionate about creating an inclusive environment where every member feels heard and valued. She believes that clear communication is the foundation of a strong community, and she works diligently to maintain those standards.\"},'social-coordinator':{name:'Katy Tiper',role:'Social Coordinator/Recruitment',image:'/images/team-photo4.jpg',bio:\"Katy Tiper serves as our Social Coordinator and Recruitment specialist, bringing energy and creativity to building our club community. With a natural ability to connect people and organize engaging events, Katy plays a vital role in making our club welcoming to new and existing members.\\n\\nKaty's responsibilities include planning social events, organizing team building activities, and developing recruitment strategies to grow our membership. She believes that the social aspect of triathlon is just as important as the athletic component, and she works to create opportunities for members to bond and build friendships.\\n\\nHer approach to recruitment focuses on showcasing the inclusive, supportive nature of our club and helping potential members see how they can fit in, regardless of their experience level. Katy believes that everyone has a place in triathlon, and she's committed to helping them find it.\"},'social-media':{name:'Paulette Dalton',role:'Social Media Manager',image:'/images/exec_socialmedia.jpg',bio:\"Paulette Dalton has been a long time member of the club (confirmed by this vintage jersey!) and is returning to your exec team this year as RECRUITMENT & RACE COORDINATOR.\\n            Paulette has been doing triathlons since 2002 (yes almost 20 years) and has completed 9 Ironmans and over 20 marathons (including The Boston Marathon 10 times).\\n            Paulette is also an NCCP Level 1 Triathlon Coach.\\n            This year you'll find her leading the Friday evening BRICKS and at most of the track workouts and Sunday swims.\\n            ASK HER ABOUT: anything bike related (training, aerodynamics, fit, nutrition\\u2026)\\n            Paulette also manages this Instagram account so send me all your club pics to post! \"},'webmaster':{name:'Ilan Gofman',role:'Webmaster',image:'/images/icon.png',bio:\"Ilan Gofman serves as our club's Webmaster, managing our digital infrastructure and ensuring that our online presence effectively serves our members. With technical expertise and a commitment to user experience, Ilan maintains the systems that keep our club connected and informed.\\n\\nIlan's responsibilities include maintaining our website, managing member databases, and implementing digital solutions that improve club operations. He works closely with the executive team to identify technological needs and develop solutions that enhance the member experience.\\n\\nBeyond his technical duties, Ilan is passionate about using technology to build community and make information accessible to all members. He believes that well-designed digital tools can strengthen relationships within the club and make it easier for members to stay engaged and informed.\"}};const Profile=()=>{const params=useParams();const{role,name}=params;const{currentUser,updateUser}=useAuth();console.log('🔍 All URL params:',params);console.log('🔍 Role param:',role);console.log('🔍 Name param:',name);console.log('👤 Current user:',currentUser);const[editMode,setEditMode]=useState(false);const[editedName,setEditedName]=useState('');const[editedEmail,setEditedEmail]=useState('');const[editedPhone,setEditedPhone]=useState('');const[editedImage,setEditedImage]=useState('');const[saving,setSaving]=useState(false);const[userProfile,setUserProfile]=useState(null);const[justSaved,setJustSaved]=useState(false);// Check if this is a user profile page or team member page\nconst isUserProfile=React.useMemo(()=>!role||role==='profile',[role]);// If it's a user profile, use current user data\nReact.useEffect(()=>{if(isUserProfile&&currentUser){console.log('👤 Loading user profile for:',currentUser.name);console.log('📊 Current user data:',currentUser);// Ensure we always have a valid image, defaulting to the default profile image\nconst profileImage=currentUser.profile_picture_url?\"http://localhost:5001\".concat(currentUser.profile_picture_url):'/images/default_profile.png';console.log('🖼️ Profile image set to:',profileImage);setUserProfile({id:currentUser.id,name:currentUser.name,email:currentUser.email,phone:currentUser.phone_number||currentUser.phone||'',image:profileImage,role:currentUser.role});setLoading(false);}else if(role&&teamMembers[role]){// This is a team member page, use local data\nconsole.log('👥 Loading team member profile for:',role);const member=teamMembers[role];setUserProfile({id:role,name:member.name,role:member.role,image:member.image||'/images/default_profile.png',bio:member.bio,email:'',// Team members don't have email/phone\nphone:''});setLoading(false);}else{console.log('❌ No valid profile found');setLoading(false);}},[isUserProfile,currentUser===null||currentUser===void 0?void 0:currentUser.id,role]);// Initialize form data when userProfile changes (only for user profiles, not team members)\nReact.useEffect(()=>{if(userProfile&&isUserProfile&&!justSaved){setEditedName(userProfile.name||'');setEditedEmail(userProfile.email||'');setEditedPhone(userProfile.phone||'');setEditedImage(userProfile.image||'/images/default_profile.png');}},[userProfile,isUserProfile,justSaved]);const[loading,setLoading]=useState(true);const handleEdit=()=>{if(!isUserProfile)return;// Only allow editing for user profiles, not team member bios\nsetJustSaved(false);// Reset the flag when starting to edit\nsetEditedName(userProfile.name||'');setEditedEmail(userProfile.email||'');setEditedPhone(userProfile.phone||'');setEditedImage(userProfile.image||'/images/default_profile.png');setEditMode(true);};const handleSave=async()=>{setSaving(true);try{const token=localStorage.getItem('triathlonToken');if(!token){throw new Error('No authentication token found');}// Prepare form data for the API\nconst formData=new FormData();formData.append('name',editedName);formData.append('email',editedEmail);formData.append('phone_number',editedPhone);// If there's a new image, add it to form data\nif(editedImage&&editedImage!==userProfile.image){console.log('🖼️ Processing new image for upload...');// Convert blob URL to file if it's a blob\nif(editedImage.startsWith('blob:')){console.log('🔄 Converting blob URL to file...');const response=await fetch(editedImage);const blob=await response.blob();const file=new File([blob],'profile-image.jpg',{type:'image/jpeg'});formData.append('profilePicture',file);console.log('✅ Image file added to form data:',file.name,file.size,file.type);}else{console.log('⚠️ Edited image is not a blob URL:',editedImage);}}else{console.log('ℹ️ No new image to upload');}// Send update to backend API\nconst apiResponse=await fetch(\"http://localhost:5001/api/users/profile\",{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token)},body:formData});if(!apiResponse.ok){const errorData=await apiResponse.json();throw new Error(errorData.error||'Failed to update profile');}const result=await apiResponse.json();console.log('✅ Profile updated successfully:',result);// Update local state with the new image\nlet finalImage;if(result.profilePictureUrl){// New image was uploaded and saved to backend\nfinalImage=\"http://localhost:5001\".concat(result.profilePictureUrl);console.log('🖼️ New image uploaded and saved:',finalImage);}else{// No new image, keep the current one\nfinalImage=userProfile.image;console.log('🖼️ Keeping current image:',finalImage);}const updatedProfile={name:editedName,email:editedEmail,phone:editedPhone,image:finalImage};setUserProfile(prev=>_objectSpread(_objectSpread({},prev),updatedProfile));// Update the auth context so changes persist across navigation\n// Use the exact field names that the auth context expects\nconst authUpdateData={name:editedName,email:editedEmail,phone_number:editedPhone,// Match the database field name\nprofile_picture_url:result.profilePictureUrl||null// Use the new image URL from backend\n};console.log('🔄 Updating auth context with:',authUpdateData);updateUser(authUpdateData);// Also update localStorage directly to ensure persistence\nconst currentStoredUser=JSON.parse(localStorage.getItem('triathlonUser')||'{}');const updatedStoredUser=_objectSpread(_objectSpread({},currentStoredUser),authUpdateData);localStorage.setItem('triathlonUser',JSON.stringify(updatedStoredUser));console.log('💾 Updated localStorage with:',updatedStoredUser);// The auth context update should automatically propagate to all components\n// that use currentUser.profile_picture_url\nconsole.log('✅ Profile image update complete - all components should now show the new image');setEditMode(false);setSaving(false);setJustSaved(true);// Reset the justSaved flag after a short delay\nsetTimeout(()=>setJustSaved(false),100);}catch(error){console.error('❌ Error updating profile:',error);alert(\"Error updating profile: \".concat(error.message));setSaving(false);}};const handleCancel=()=>{setEditMode(false);if(isUserProfile){setEditedName((userProfile===null||userProfile===void 0?void 0:userProfile.name)||'');setEditedEmail((userProfile===null||userProfile===void 0?void 0:userProfile.email)||'');setEditedPhone((userProfile===null||userProfile===void 0?void 0:userProfile.phone)||'');setEditedImage((userProfile===null||userProfile===void 0?void 0:userProfile.image)||'/images/default_profile.png');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-state\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading profile...\"})})})});}if(!userProfile){return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-state\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profile Not Found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Sorry, we couldn't find the profile you're looking for.\"}),/*#__PURE__*/_jsx(Link,{to:\"/coaches-exec\",className:\"back-link\",children:\"\\u2190 Back to Team\"})]})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[isUserProfile?/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"back-link\",children:\"\\u2190 Back to Dashboard\"}):/*#__PURE__*/_jsx(Link,{to:\"/coaches-exec\",className:\"back-link\",children:\"\\u2190 Back to Team\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-image-section\",children:/*#__PURE__*/_jsx(\"img\",{src:editMode?editedImage||userProfile.image||'/images/default_profile.png':userProfile.image||'/images/default_profile.png',alt:\"\".concat(userProfile.name,\" - \").concat(userProfile.role),className:\"profile-image\",onError:e=>{console.error('❌ Image failed to load:',e.target.src);console.log('🔄 Falling back to default profile image');e.target.src='/images/default_profile.png';},onLoad:e=>{const currentSrc=e.target.src;console.log('✅ Image loaded successfully:',currentSrc);if(currentSrc.includes('default_profile.png')){console.log('🖼️ Displaying default profile image');}}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"profile-name\",children:userProfile.name}),/*#__PURE__*/_jsx(\"h2\",{className:\"profile-role\",children:userProfile.role}),isUserProfile&&/*#__PURE__*/_jsx(\"div\",{className:\"profile-actions\",children:editMode?/*#__PURE__*/_jsxs(\"div\",{className:\"edit-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleSave,disabled:saving,children:saving?'Saving...':'Save Changes'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleCancel,disabled:saving,children:\"Cancel\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-edit\",onClick:handleEdit,children:\"Edit Profile\"})})]}),editMode?/*#__PURE__*/_jsxs(\"div\",{className:\"edit-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload-section\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"profile-image\",className:\"image-upload-label\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview\",children:[/*#__PURE__*/_jsx(\"img\",{src:editedImage||userProfile.image||'/images/default_profile.png',alt:\"\".concat(userProfile.name,\" - \").concat(userProfile.role),className:\"preview-image\",onError:e=>{e.target.src='/images/default_profile.png';}}),/*#__PURE__*/_jsx(\"div\",{className:\"image-overlay\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Click to change image\"})})]})}),/*#__PURE__*/_jsx(\"input\",{id:\"profile-image\",type:\"file\",accept:\"image/*\",onChange:e=>{const file=e.target.files[0];if(file){console.log('📁 New image selected:',file.name,file.type,file.size);const imageUrl=URL.createObjectURL(file);setEditedImage(imageUrl);console.log('🖼️ Preview image set to:',imageUrl);}},style:{display:'none'}}),/*#__PURE__*/_jsx(\"p\",{className:\"image-upload-help\",children:\"Click the image above to upload a new profile picture\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-edit-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name-input\",className:\"form-label\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name-input\",type:\"text\",value:editedName,onChange:e=>setEditedName(e.target.value),className:\"form-input\",placeholder:\"Enter your name...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email-input\",className:\"form-label\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email-input\",type:\"email\",value:editedEmail,onChange:e=>setEditedEmail(e.target.value),className:\"form-input\",placeholder:\"Enter your email...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone-input\",className:\"form-label\",children:\"Phone:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"phone-input\",type:\"tel\",value:editedPhone,onChange:e=>setEditedPhone(e.target.value),className:\"form-input\",placeholder:\"Enter your phone number...\"})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",userProfile.email]}),userProfile.phone&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",userProfile.phone]}),userProfile.bio&&/*#__PURE__*/_jsx(\"div\",{className:\"profile-bio\",children:userProfile.bio.split('\\n\\n').map((paragraph,index)=>/*#__PURE__*/_jsx(\"p\",{children:paragraph},index))})]})]})]})]})});};export default Profile;","map":{"version":3,"names":["React","useState","useParams","Link","useAuth","jsx","_jsx","jsxs","_jsxs","teamMembers","name","role","image","bio","Profile","params","currentUser","updateUser","console","log","editMode","setEditMode","editedName","setEditedName","editedEmail","setEditedEmail","editedPhone","setEditedPhone","editedImage","setEditedImage","saving","setSaving","userProfile","setUserProfile","justSaved","setJustSaved","isUserProfile","useMemo","useEffect","profileImage","profile_picture_url","concat","id","email","phone","phone_number","setLoading","member","loading","handleEdit","handleSave","token","localStorage","getItem","Error","formData","FormData","append","startsWith","response","fetch","blob","file","File","type","size","apiResponse","method","headers","body","ok","errorData","json","error","result","finalImage","profilePictureUrl","updatedProfile","prev","_objectSpread","authUpdateData","currentStoredUser","JSON","parse","updatedStoredUser","setItem","stringify","setTimeout","alert","message","handleCancel","className","children","to","src","alt","onError","e","target","onLoad","currentSrc","includes","onClick","disabled","htmlFor","accept","onChange","files","imageUrl","URL","createObjectURL","style","display","value","placeholder","split","map","paragraph","index"],"sources":["/Users/jadeclement/Documents/Developer/uofttri/src/components/Profile.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport './Profile.css';\n\n// Team member data - moved outside component to prevent recreation on every render\nconst teamMembers = {\n    'swim-coach': {\n      name: 'Justin Konik',\n      role: 'Swim Coach',\n      image: '/images/swimcoach.png',\n      bio: `Justin Konik is our dedicated swim coach with over 10 years of experience in competitive swimming and triathlon coaching. He specializes in stroke technique, endurance training, and helping athletes overcome their fear of open water swimming.\n\nJustin's coaching philosophy focuses on building confidence in the water while developing efficient swimming mechanics. He has coached athletes from complete beginners to elite competitors, and his personalized approach ensures each swimmer reaches their full potential.\n\nWhen not coaching, Justin competes in open water swimming events and enjoys helping new triathletes discover their love for the sport. He believes that swimming should be both challenging and enjoyable, and he's committed to making every training session productive and fun.`\n    },\n    'co-president': {\n      name: 'Jade Clement',\n      role: 'Co-President',\n      image: '/images/team-photo1.jpeg',\n      bio: `Jade joined the team when she started studying engineering at the University of Toronto in 2021. She raced her first mini triathlon at 8 years old and has been having fun racing ever since! Throughout high school she focused mainly on swimming and only stopped competitive swim team at 16. This summer she competed in her first Olympic distance triathlon at the TTF having only ever done sprints before that. Last year she participated in her most exciting race to date - the amateur World Triathlon Championships in Spain! Crossing her fingers that she’ll qualify again for next year! In 2025 she took the role of co-president alongside Marlene and hopes to keep growing the team, plan races together and continue having fun in this crazy sport.`\n    },\n    'co-president-2': {\n      name: 'Marlene Garijo',\n      role: 'Co-President',\n      image: '/images/team-photo2.jpeg',\n      bio: `Marlene Garijo serves as Co-President alongside Jade, bringing her unique perspective and energy to club leadership. With a background in competitive sports and event organization, Marlene excels at creating memorable experiences for club members.\n\nMarlene's strengths lie in strategic planning, member engagement, and ensuring the club operates smoothly behind the scenes. She works closely with the executive team to implement new initiatives and maintain the high standards that make our club special.\n\nHer passion for triathlon extends beyond personal achievement to helping others discover their potential in the sport. Marlene believes that every member has something valuable to contribute to the club, and she works to create opportunities for everyone to get involved.`\n    },\n    'treasurer': {\n      name: 'Edward Ing',\n      role: 'Treasurer',\n      image: '/images/exec_treasurer.jpg',\n      bio: `\nEdward Ing is our newest member of the exec team and joins as your web master and substitute bike leader outdoors. He joined the club in January of 2015. The rationale was to become a good swimmer from near scratch and have a club to train for running races. That summer he raced a duathlon at Welland and thought it was bizarre that in this sport that finishing nowhere near the lead he could still earn a second place podium spot (45-49 age groupers).\nBut what inspired him was that he thought he was running with Olympians because he saw himself racing competitors wearing Team Canada triathlon uniforms. He was mistaken. He found out they were not Olympians, but age-groupers, some like him in the 50s. But he was inspired to earn the privilege to wear those Team Canada trisuit uniforms thinking that might be an achievable goal. He had a bike accident that summer and had to leave the first triathlon till 2016.\nHe finally did his first triathlon, a sprint in Woodstock in 2016. It was a preparation race for the goal of earning a ITU World Championship age-group qualification in the Ottawa National Championship race.\nHis favourite achievement is the New York City Half Marathon 2016, just missing a money spot by one. His duathlon qualification at Esprit de Montreal 2019 for the 2020 ITU Multisport Championships in his mind is his to be executed multisport race.\nAlso he says quite memorable was his Boston qualifying finish at the Toronto Waterfront marathon which he felt was a more important achievement than running Boston itself.\n(Over the COVID hiatus he worked on his swim technique whenever there was a pool opening and thinks he is on the road to fast swims.)\nHis message to young rookie tri-club athletes — “You are likely in the easiest age group to qualify for the World Age-Group Championships, train to qualify, Bragging right last a lifetime here.!”`\n    },\n    'secretary': {\n      name: 'Lauren Williams',\n      role: 'Secretary',\n      image: '/images/team-photo3.jpeg',\n      bio: `Lauren Williams is our club Secretary, responsible for maintaining clear communication and record-keeping within the club. With excellent organizational skills and attention to detail, Lauren ensures that important information reaches all members and that club activities are well-documented.\n\nLauren's role includes managing club communications, taking meeting minutes, maintaining membership records, and coordinating with other executive members to keep everyone informed. Her work behind the scenes is crucial to the smooth operation of the club.\n\nLauren is passionate about creating an inclusive environment where every member feels heard and valued. She believes that clear communication is the foundation of a strong community, and she works diligently to maintain those standards.`\n    },\n    'social-coordinator': {\n      name: 'Katy Tiper',\n      role: 'Social Coordinator/Recruitment',\n      image: '/images/team-photo4.jpg',\n      bio: `Katy Tiper serves as our Social Coordinator and Recruitment specialist, bringing energy and creativity to building our club community. With a natural ability to connect people and organize engaging events, Katy plays a vital role in making our club welcoming to new and existing members.\n\nKaty's responsibilities include planning social events, organizing team building activities, and developing recruitment strategies to grow our membership. She believes that the social aspect of triathlon is just as important as the athletic component, and she works to create opportunities for members to bond and build friendships.\n\nHer approach to recruitment focuses on showcasing the inclusive, supportive nature of our club and helping potential members see how they can fit in, regardless of their experience level. Katy believes that everyone has a place in triathlon, and she's committed to helping them find it.`\n    },\n    'social-media': {\n      name: 'Paulette Dalton',\n      role: 'Social Media Manager',\n      image: '/images/exec_socialmedia.jpg',\n      bio: `Paulette Dalton has been a long time member of the club (confirmed by this vintage jersey!) and is returning to your exec team this year as RECRUITMENT & RACE COORDINATOR.\n            Paulette has been doing triathlons since 2002 (yes almost 20 years) and has completed 9 Ironmans and over 20 marathons (including The Boston Marathon 10 times).\n            Paulette is also an NCCP Level 1 Triathlon Coach.\n            This year you'll find her leading the Friday evening BRICKS and at most of the track workouts and Sunday swims.\n            ASK HER ABOUT: anything bike related (training, aerodynamics, fit, nutrition…)\n            Paulette also manages this Instagram account so send me all your club pics to post! `  \n              },\n    'webmaster': {\n      name: 'Ilan Gofman',\n      role: 'Webmaster',\n      image: '/images/icon.png',\n      bio: `Ilan Gofman serves as our club's Webmaster, managing our digital infrastructure and ensuring that our online presence effectively serves our members. With technical expertise and a commitment to user experience, Ilan maintains the systems that keep our club connected and informed.\n\nIlan's responsibilities include maintaining our website, managing member databases, and implementing digital solutions that improve club operations. He works closely with the executive team to identify technological needs and develop solutions that enhance the member experience.\n\nBeyond his technical duties, Ilan is passionate about using technology to build community and make information accessible to all members. He believes that well-designed digital tools can strengthen relationships within the club and make it easier for members to stay engaged and informed.`\n      }\n};\n\nconst Profile = () => {\n  const params = useParams();\n  const { role, name } = params;\n  const { currentUser, updateUser } = useAuth();\n  \n  console.log('🔍 All URL params:', params);\n  console.log('🔍 Role param:', role);\n  console.log('🔍 Name param:', name);\n  console.log('👤 Current user:', currentUser);\n  \n  const [editMode, setEditMode] = useState(false);\n  const [editedName, setEditedName] = useState('');\n  const [editedEmail, setEditedEmail] = useState('');\n  const [editedPhone, setEditedPhone] = useState('');\n  const [editedImage, setEditedImage] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [userProfile, setUserProfile] = useState(null);\n  const [justSaved, setJustSaved] = useState(false);\n\n  // Check if this is a user profile page or team member page\n  const isUserProfile = React.useMemo(() => !role || role === 'profile', [role]);\n  \n  // If it's a user profile, use current user data\n  React.useEffect(() => {\n    if (isUserProfile && currentUser) {\n      console.log('👤 Loading user profile for:', currentUser.name);\n      console.log('📊 Current user data:', currentUser);\n      // Ensure we always have a valid image, defaulting to the default profile image\n      const profileImage = currentUser.profile_picture_url \n        ? `http://localhost:5001${currentUser.profile_picture_url}` \n        : '/images/default_profile.png';\n      \n      console.log('🖼️ Profile image set to:', profileImage);\n      \n      setUserProfile({\n        id: currentUser.id,\n        name: currentUser.name,\n        email: currentUser.email,\n        phone: currentUser.phone_number || currentUser.phone || '',\n        image: profileImage,\n        role: currentUser.role\n      });\n      setLoading(false);\n    } else if (role && teamMembers[role]) {\n      // This is a team member page, use local data\n      console.log('👥 Loading team member profile for:', role);\n      const member = teamMembers[role];\n      setUserProfile({\n        id: role,\n        name: member.name,\n        role: member.role,\n        image: member.image || '/images/default_profile.png',\n        bio: member.bio,\n        email: '', // Team members don't have email/phone\n        phone: ''\n      });\n      setLoading(false);\n    } else {\n      console.log('❌ No valid profile found');\n      setLoading(false);\n    }\n  }, [isUserProfile, currentUser?.id, role]);\n\n  // Initialize form data when userProfile changes (only for user profiles, not team members)\n  React.useEffect(() => {\n    if (userProfile && isUserProfile && !justSaved) {\n      setEditedName(userProfile.name || '');\n      setEditedEmail(userProfile.email || '');\n      setEditedPhone(userProfile.phone || '');\n      setEditedImage(userProfile.image || '/images/default_profile.png');\n    }\n  }, [userProfile, isUserProfile, justSaved]);\n\n  const [loading, setLoading] = useState(true);\n\n  const handleEdit = () => {\n    if (!isUserProfile) return; // Only allow editing for user profiles, not team member bios\n    \n    setJustSaved(false); // Reset the flag when starting to edit\n    setEditedName(userProfile.name || '');\n    setEditedEmail(userProfile.email || '');\n    setEditedPhone(userProfile.phone || '');\n    setEditedImage(userProfile.image || '/images/default_profile.png');\n    setEditMode(true);\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    \n    try {\n      const token = localStorage.getItem('triathlonToken');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      // Prepare form data for the API\n      const formData = new FormData();\n      formData.append('name', editedName);\n      formData.append('email', editedEmail);\n      formData.append('phone_number', editedPhone);\n      \n      // If there's a new image, add it to form data\n      if (editedImage && editedImage !== userProfile.image) {\n        console.log('🖼️ Processing new image for upload...');\n        // Convert blob URL to file if it's a blob\n        if (editedImage.startsWith('blob:')) {\n          console.log('🔄 Converting blob URL to file...');\n          const response = await fetch(editedImage);\n          const blob = await response.blob();\n          const file = new File([blob], 'profile-image.jpg', { type: 'image/jpeg' });\n          formData.append('profilePicture', file);\n          console.log('✅ Image file added to form data:', file.name, file.size, file.type);\n        } else {\n          console.log('⚠️ Edited image is not a blob URL:', editedImage);\n        }\n      } else {\n        console.log('ℹ️ No new image to upload');\n      }\n\n      // Send update to backend API\n      const apiResponse = await fetch(`http://localhost:5001/api/users/profile`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n\n      if (!apiResponse.ok) {\n        const errorData = await apiResponse.json();\n        throw new Error(errorData.error || 'Failed to update profile');\n      }\n\n      const result = await apiResponse.json();\n      console.log('✅ Profile updated successfully:', result);\n\n      // Update local state with the new image\n      let finalImage;\n      if (result.profilePictureUrl) {\n        // New image was uploaded and saved to backend\n        finalImage = `http://localhost:5001${result.profilePictureUrl}`;\n        console.log('🖼️ New image uploaded and saved:', finalImage);\n      } else {\n        // No new image, keep the current one\n        finalImage = userProfile.image;\n        console.log('🖼️ Keeping current image:', finalImage);\n      }\n      \n      const updatedProfile = {\n        name: editedName,\n        email: editedEmail,\n        phone: editedPhone,\n        image: finalImage\n      };\n      \n      setUserProfile(prev => ({\n        ...prev,\n        ...updatedProfile\n      }));\n\n      // Update the auth context so changes persist across navigation\n      // Use the exact field names that the auth context expects\n      const authUpdateData = {\n        name: editedName,\n        email: editedEmail,\n        phone_number: editedPhone,  // Match the database field name\n        profile_picture_url: result.profilePictureUrl || null  // Use the new image URL from backend\n      };\n      \n      console.log('🔄 Updating auth context with:', authUpdateData);\n      updateUser(authUpdateData);\n      \n      // Also update localStorage directly to ensure persistence\n      const currentStoredUser = JSON.parse(localStorage.getItem('triathlonUser') || '{}');\n      const updatedStoredUser = { ...currentStoredUser, ...authUpdateData };\n      localStorage.setItem('triathlonUser', JSON.stringify(updatedStoredUser));\n      console.log('💾 Updated localStorage with:', updatedStoredUser);\n      \n      // The auth context update should automatically propagate to all components\n      // that use currentUser.profile_picture_url\n      console.log('✅ Profile image update complete - all components should now show the new image');\n\n      setEditMode(false);\n      setSaving(false);\n      setJustSaved(true);\n      \n      // Reset the justSaved flag after a short delay\n      setTimeout(() => setJustSaved(false), 100);\n      \n    } catch (error) {\n      console.error('❌ Error updating profile:', error);\n      alert(`Error updating profile: ${error.message}`);\n      setSaving(false);\n    }\n  };\n\n  const handleCancel = () => {\n    setEditMode(false);\n    if (isUserProfile) {\n      setEditedName(userProfile?.name || '');\n      setEditedEmail(userProfile?.email || '');\n      setEditedPhone(userProfile?.phone || '');\n      setEditedImage(userProfile?.image || '/images/default_profile.png');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"profile-container\">\n        <div className=\"container\">\n          <div className=\"loading-state\">\n            <h2>Loading profile...</h2>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!userProfile) {\n    return (\n      <div className=\"profile-container\">\n        <div className=\"container\">\n          <div className=\"error-state\">\n            <h2>Profile Not Found</h2>\n            <p>Sorry, we couldn't find the profile you're looking for.</p>\n            <Link to=\"/coaches-exec\" className=\"back-link\">← Back to Team</Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n\n\n  return (\n    <div className=\"profile-container\">\n      <div className=\"container\">\n        {isUserProfile ? (\n          <Link to=\"/dashboard\" className=\"back-link\">← Back to Dashboard</Link>\n        ) : (\n          <Link to=\"/coaches-exec\" className=\"back-link\">← Back to Team</Link>\n        )}\n        \n        <div className=\"profile-content\">\n          <div className=\"profile-image-section\">\n            <img \n              src={editMode ? (editedImage || userProfile.image || '/images/default_profile.png') : (userProfile.image || '/images/default_profile.png')} \n              alt={`${userProfile.name} - ${userProfile.role}`}\n              className=\"profile-image\"\n              onError={(e) => {\n                console.error('❌ Image failed to load:', e.target.src);\n                console.log('🔄 Falling back to default profile image');\n                e.target.src = '/images/default_profile.png';\n              }}\n              onLoad={(e) => {\n                const currentSrc = e.target.src;\n                console.log('✅ Image loaded successfully:', currentSrc);\n                if (currentSrc.includes('default_profile.png')) {\n                  console.log('🖼️ Displaying default profile image');\n                }\n              }}\n            />\n          </div>\n          \n          <div className=\"profile-info-section\">\n            <div className=\"profile-header\">\n              <h1 className=\"profile-name\">{userProfile.name}</h1>\n              <h2 className=\"profile-role\">{userProfile.role}</h2>\n              {isUserProfile && (\n                <div className=\"profile-actions\">\n                  {editMode ? (\n                    <div className=\"edit-actions\">\n                      <button \n                        className=\"btn btn-primary\" \n                        onClick={handleSave}\n                        disabled={saving}\n                      >\n                        {saving ? 'Saving...' : 'Save Changes'}\n                      </button>\n                      <button \n                        className=\"btn btn-secondary\" \n                        onClick={handleCancel}\n                        disabled={saving}\n                      >\n                        Cancel\n                      </button>\n                    </div>\n                  ) : (\n                    <button \n                      className=\"btn btn-edit\" \n                      onClick={handleEdit}\n                    >\n                      Edit Profile\n                    </button>\n                  )}\n                </div>\n              )}\n            </div>\n            \n            {editMode ? (\n              <div className=\"edit-form\">\n                <div className=\"image-upload-section\">\n                  <label htmlFor=\"profile-image\" className=\"image-upload-label\">\n                    <div className=\"image-preview\">\n                      <img \n                        src={editedImage || userProfile.image || '/images/default_profile.png'}\n                        alt={`${userProfile.name} - ${userProfile.role}`}\n                        className=\"preview-image\"\n                        onError={(e) => {\n                          e.target.src = '/images/default_profile.png';\n                        }}\n                      />\n                      <div className=\"image-overlay\">\n                        <span>Click to change image</span>\n                      </div>\n                    </div>\n                  </label>\n                  <input\n                    id=\"profile-image\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={(e) => {\n                      const file = e.target.files[0];\n                      if (file) {\n                        console.log('📁 New image selected:', file.name, file.type, file.size);\n                        const imageUrl = URL.createObjectURL(file);\n                        setEditedImage(imageUrl);\n                        console.log('🖼️ Preview image set to:', imageUrl);\n                      }\n                    }}\n                    style={{ display: 'none' }}\n                  />\n                  <p className=\"image-upload-help\">\n                    Click the image above to upload a new profile picture\n                  </p>\n                </div>\n                \n                <div className=\"profile-edit-section\">\n                  <div className=\"form-group\">\n                    <label htmlFor=\"name-input\" className=\"form-label\">Name:</label>\n                    <input\n                      id=\"name-input\"\n                      type=\"text\"\n                      value={editedName}\n                      onChange={(e) => setEditedName(e.target.value)}\n                      className=\"form-input\"\n                      placeholder=\"Enter your name...\"\n                    />\n                  </div>\n                  \n                                    <div className=\"form-group\">\n                    <label htmlFor=\"email-input\" className=\"form-label\">Email:</label>\n                    <input\n                      id=\"email-input\"\n                      type=\"email\"\n                      value={editedEmail}\n                      onChange={(e) => setEditedEmail(e.target.value)}\n                      className=\"form-input\"\n                      placeholder=\"Enter your email...\"\n                    />\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label htmlFor=\"phone-input\" className=\"form-label\">Phone:</label>\n                    <input\n                      id=\"phone-input\"\n                      type=\"tel\"\n                      value={editedPhone}\n                      onChange={(e) => setEditedPhone(e.target.value)}\n                      className=\"form-input\"\n                      placeholder=\"Enter your phone number...\"\n                    />\n                  </div>\n                  \n \n                </div>\n              </div>\n            ) : (\n              <div className=\"profile-info\">\n                <div className=\"info-item\">\n                  <strong>Email:</strong> {userProfile.email}\n                </div>\n                {userProfile.phone && (\n                  <div className=\"info-item\">\n                    <strong>Phone:</strong> {userProfile.phone}\n                  </div>\n                )}\n                {userProfile.bio && (\n                  <div className=\"profile-bio\">\n                    {userProfile.bio.split('\\n\\n').map((paragraph, index) => (\n                      <p key={index}>{paragraph}</p>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}